{"id":"vtr-108","title":"TUI: Show idle/active status indicators","description":"Context: The TUI should reflect session idle vs active state for quick triage.\nScope:\n- Consume idle-state gRPC events in the TUI client.\n- Display a color/icon indicator in the session list/status bar for active vs idle sessions.\n- Ensure indicator updates live without disrupting navigation or rendering.\nAcceptance:\n- TUI shows a clear idle/active indicator per session.\n- Indicators update promptly as idle state changes.\n- No regressions to input handling or session navigation.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-21T01:42:15.248242618Z","created_by":"ubuntu","updated_at":"2026-01-21T02:54:28.837043591Z","closed_at":"2026-01-21T02:54:28.836976992Z","close_reason":"Completed","compaction_level":0,"original_size":0,"labels":["area:tui"],"dependencies":[{"issue_id":"vtr-108","depends_on_id":"vtr-3jv","type":"parent-child","created_at":"2026-01-26T17:41:06Z","created_by":"import"},{"issue_id":"vtr-108","depends_on_id":"vtr-y4h","type":"blocks","created_at":"2026-01-26T17:41:06Z","created_by":"import"}]}
{"id":"vtr-12j","title":"Attach mouse capture + coordinate mapping","description":"Capture mouse input in attach and map to viewport coordinates.\n\nScope:\n- Use Bubbletea mouse options (WithMouseCellMotion or AllMotion).\n- Ignore mouse while list/create modals are open.\n- Convert terminal coords to session grid coords.","status":"blocked","priority":2,"issue_type":"task","created_at":"2026-01-20T20:34:55.923171950Z","created_by":"ubuntu","updated_at":"2026-01-20T22:15:00.442991982Z","compaction_level":0,"original_size":0,"labels":["area:tui","milestone:M8"],"dependencies":[{"issue_id":"vtr-12j","depends_on_id":"vtr-1r7","type":"blocks","created_at":"2026-01-26T17:41:06Z","created_by":"import"},{"issue_id":"vtr-12j","depends_on_id":"vtr-4vi","type":"parent-child","created_at":"2026-01-26T17:41:06Z","created_by":"import"}]}
{"id":"vtr-12k","title":"Web UI: Redesign multi-view command hierarchy to reduce clutter","description":"Context: The multi-view command area is cluttered. The filter controls and broadcast-to-selection are split across separate boxes, and the hierarchy feels disorganized.\n\nGoal: Create a cohesive command hierarchy that surfaces the most-used actions and tucks lower-frequency actions behind menus to reduce visual clutter.\n\nScope:\n- Inventory multi-view commands (filtering, selection, broadcast, etc.) and estimate usage frequency.\n- Propose a unified command bar layout that prioritizes primary actions and hides secondary actions behind menus/overflow.\n- Define interaction patterns for hidden commands (menu, kebab, etc.) and ensure accessibility.\n- Update the UI layout to match the new hierarchy.\n\nAcceptance:\n- Multi-view controls feel cohesive and uncluttered.\n- Primary actions are immediately visible; secondary actions are discoverable but not dominant.\n- Usability is preserved on mobile and desktop.\n- No regression to existing multi-view functionality.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-22T02:02:38.526020887Z","created_by":"ubuntu","updated_at":"2026-01-27T19:04:06.640576747Z","closed_at":"2026-01-27T19:04:06.640525328Z","close_reason":"Completed","compaction_level":0,"original_size":0,"labels":["area:design","area:web"]}
{"id":"vtr-12q","title":"Web UI: Show idle/active status indicators","description":"Context: Web UI needs at-a-glance visibility into session activity/idle state using the new idle-state stream.\nScope:\n- Consume idle-state events via the web bridge and attach them to session entries.\n- Add a color-based icon indicator for active vs idle (and optional unknown state).\n- Ensure the indicator updates live and remains visible in session list (and multi-view thumbnails if present).\nAcceptance:\n- Session list shows a clear color/icon indicator for active vs idle.\n- Indicators update within a short interval after idle-state changes.\n- UI remains usable and accessible; no regressions to selection/attach.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-21T01:42:06.822548944Z","created_by":"ubuntu","updated_at":"2026-01-21T02:30:13.602860260Z","closed_at":"2026-01-21T02:30:13.602806285Z","close_reason":"Completed","compaction_level":0,"original_size":0,"labels":["area:web"],"dependencies":[{"issue_id":"vtr-12q","depends_on_id":"vtr-xob","type":"parent-child","created_at":"2026-01-26T17:41:06Z","created_by":"import"},{"issue_id":"vtr-12q","depends_on_id":"vtr-y4h","type":"blocks","created_at":"2026-01-26T17:41:06Z","created_by":"import"}]}
{"id":"vtr-130","title":"Terminal renderer (keyframe-only)","description":"Implement terminal grid renderer from ScreenUpdate keyframes (no ANSI parsing).\n\nScope:\n- Render ScreenRow/ScreenCell data with fg/bg/attributes.\n- Handle cursor display and resize flow.\n- Use run-based rendering to avoid per-cell DOM churn.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-20T20:34:55.419127136Z","created_by":"ubuntu","updated_at":"2026-01-20T21:20:48.441464555Z","closed_at":"2026-01-20T21:20:48.441406242Z","close_reason":"Completed","compaction_level":0,"original_size":0,"labels":["area:streaming","area:web","milestone:M7"],"dependencies":[{"issue_id":"vtr-130","depends_on_id":"vtr-xob","type":"parent-child","created_at":"2026-01-26T17:41:06Z","created_by":"import"}]}
{"id":"vtr-133","title":"M0 - Project Setup","description":"Goal: Establish repo scaffolding and build/test workflow.\n\nDeliverables:\n- go.mod/go.sum with baseline deps\n- proto/vtr.proto initial service/messages\n- mise.toml tasks for proto/build/test\n- cmd/vtr skeleton\n- docs/progress.md referenced by docs/agent-meta.md\n\nSuccess criteria:\n- go test ./... passes\n- mise run proto generates Go stubs locally\n- repo layout matches docs/spec.md\n\nHistorical: completed 2026-01-18; migrated from docs/progress.md.","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-20T20:33:13.191219045Z","created_by":"ubuntu","updated_at":"2026-01-20T20:34:54.806623225Z","closed_at":"2026-01-20T20:34:54.806528603Z","close_reason":"historical","compaction_level":0,"original_size":0,"labels":["area:build","milestone:M0"]}
{"id":"vtr-1374","title":"Generate TS proto types + integrate into mise","description":"From docs/architecture-review.md: eliminate proto drift by generating TS types from proto/vtr.proto and wiring into build.\n\nPlan:\n- Choose TS generator compatible with current web stack (protobufjs or buf/ts plugin). Preference: protobufjs CLI so existing encode/decode usage remains minimal.\n- Add a generation task in mise.toml (e.g. `tasks.proto-ts`) that runs from repo root and writes to `web/src/gen/vtr.proto.ts` or `web/src/lib/proto.gen.ts`.\n- Update web code to import generated types/encoders/decoders; remove the hand-written schema in `web/src/lib/proto.ts` or convert it to a thin wrapper around generated output.\n- Ensure `mise run web-build`, `mise run build`, and `mise run test-web-e2e` depend on `proto-ts` (directly or via `proto`).\n- Update docs (docs/protocols.md or docs/development.md) to describe TS generation and the single source of truth.\n- Ensure generated files are either committed (and removed from .gitignore if needed) or excluded with clear build-time generation (decide and document).\n\nDeliverables:\n- Generated TS proto module in web/.\n- Updated imports in `web/src/lib/ws.ts` and any other proto consumers.\n- `mise.toml` tasks updated to include TS generation.\n- Deletion of `web/src/lib/proto.ts` if fully superseded.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-05T21:56:55.402105778Z","created_by":"ubuntu","updated_at":"2026-02-05T22:10:18.829940673Z","closed_at":"2026-02-05T22:10:18.829871329Z","close_reason":"Completed","compaction_level":0,"original_size":0,"labels":["cleanup"]}
{"id":"vtr-14h","title":"Web UI Favicon","description":"Goal: Provide a cohesive favicon + app icon set for the web UI.\n\nScope:\n- Design or source a base mark/logo usable at small sizes.\n- Generate favicon assets (ICO + PNG variants) and optional touch icons.\n- Wire icons into the web app head metadata.\n- Document the source file(s) and export pipeline.\n\nSuccess criteria:\n- Browser tabs show the new favicon.\n- Icons look crisp at common sizes (16/32/48/180).\n- Assets and source are tracked in repo with clear instructions for updates.","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-21T02:19:59.518497635Z","created_by":"ubuntu","updated_at":"2026-01-21T02:29:14.285719784Z","closed_at":"2026-01-21T02:29:14.285643527Z","close_reason":"Completed","compaction_level":0,"original_size":0,"labels":["area:design","area:web"]}
{"id":"vtr-16x","title":"Web UI: Broadcast commands to selected sessions","description":"Context: The multi-view dashboard should act as a central command panel that can issue actions to selected sessions.\nScope:\n- Add selection mechanics for multi-view thumbnails (single/multi-select).\n- Provide a \"send command\" affordance that can broadcast keystrokes or control sequences to the selected sessions.\n- Include guardrails (confirmations or preview) to prevent accidental broad sends.\nAcceptance:\n- Users can select multiple sessions from the multi-view dashboard.\n- Sending a command/sequence broadcasts to all selected sessions.\n- UI makes it clear which sessions will receive the command and offers a safety confirmation.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-21T01:31:10.688018864Z","created_by":"ubuntu","updated_at":"2026-01-21T02:00:27.866026050Z","closed_at":"2026-01-21T02:00:27.865944352Z","close_reason":"Completed","compaction_level":0,"original_size":0,"labels":["area:web"],"dependencies":[{"issue_id":"vtr-16x","depends_on_id":"vtr-2ke","type":"blocks","created_at":"2026-01-26T17:41:06Z","created_by":"import"},{"issue_id":"vtr-16x","depends_on_id":"vtr-xob","type":"parent-child","created_at":"2026-01-26T17:41:06Z","created_by":"import"}]}
{"id":"vtr-1bg","title":"CGO sanitizer test target","description":"Add CGO sanitizer test target for go-ghostty and server VT integration.\n\nScope:\n- go test -asan -tags=asan with cgocheck2 enabled.\n- Use ASAN_OPTIONS/LSAN_OPTIONS with suppression files.\n- Keep runtime under 5 minutes.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-20T20:34:56.156924693Z","created_by":"ubuntu","updated_at":"2026-01-20T22:12:42.102917924Z","closed_at":"2026-01-20T22:12:42.102834753Z","close_reason":"Completed","compaction_level":0,"original_size":0,"labels":["area:testing","milestone:M9"],"dependencies":[{"issue_id":"vtr-1bg","depends_on_id":"vtr-a05","type":"blocks","created_at":"2026-01-26T17:41:06Z","created_by":"import"},{"issue_id":"vtr-1bg","depends_on_id":"vtr-uoj","type":"parent-child","created_at":"2026-01-26T17:41:06Z","created_by":"import"}]}
{"id":"vtr-1bl","title":"README: Add hero image + human-friendly overview","description":"Context: The top-level README needs a compelling hero image and human-focused narrative to explain the projectâ€™s novelty and rationale.\nScope:\n- Create a hero image for README.md using the nanobanana skill/workflow (track source/prompts).\n- Update README.md with a polished, human-friendly overview in the style of popular OSS projects (e.g., clawdbot/clawdbot, mcp_agent_mail).\n- Include a concise hook, project rationale, key features, and quickstart/usage highlights.\n- Ensure assets are stored in repo with clear attribution or generation notes.\nAcceptance:\n- README.md includes a hero image at the top and reads well for humans.\n- The README has a clear hook + rationale + feature/usage sections.\n- Image asset and generation notes are tracked in-repo.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-21T02:23:03.514577884Z","created_by":"ubuntu","updated_at":"2026-01-21T03:49:21.377100015Z","closed_at":"2026-01-21T03:49:21.377031753Z","close_reason":"Completed","compaction_level":0,"original_size":0,"labels":["area:design","area:docs"]}
{"id":"vtr-1cu","title":"Enable TUI scrollback via mouse wheel","description":"Allow mouse wheel scrolling in TUI and auto-enter scrollback when user scrolls.","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-23T18:50:19.033369686Z","created_by":"ubuntu","updated_at":"2026-01-23T18:50:19.033369686Z","compaction_level":0,"original_size":0}
{"id":"vtr-1cv","title":"Web UI: Rename session from tab context menu","description":"Context: Session tabs need a way to rename sessions without leaving the tab bar.\nScope:\n- Add a \"Rename\" action to the tab right-click context menu.\n- Provide an inline or lightweight rename UI (no heavy modal) and validate naming rules.\n- Persist the updated name via the coordinator API and refresh the tab label.\nAcceptance:\n- Right-clicking a tab offers a Rename option.\n- Renaming updates the session name in the UI and backend.\n- Errors/collisions are handled gracefully.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-21T21:56:47.975224479Z","created_by":"ubuntu","updated_at":"2026-01-21T22:24:41.826132845Z","closed_at":"2026-01-21T22:24:41.826076216Z","close_reason":"Completed","compaction_level":0,"original_size":0,"labels":["area:web"],"dependencies":[{"issue_id":"vtr-1cv","depends_on_id":"vtr-xob","type":"parent-child","created_at":"2026-01-26T17:41:06Z","created_by":"import"}]}
{"id":"vtr-1dp","title":"TUI: Tab bar UX improvements","description":"Context: The attach TUI tab bar currently renders sessions and supports keyboard navigation. Improve usability, overflow handling, and visual affordances without breaking keyboard flows.\n\nScope:\n- Maintain active tab visibility in all width-constrained layouts.\n- Add overflow indicators that show how many tabs are hidden on each side when truncated.\n- Provide clearer active/idle/exited styling in the tab bar (icons + text treatment).\n- Improve name truncation behavior (consistent ellipsis + tooltip/alt behavior if feasible).\n- Support mouse interactions when enabled: left-click switch, middle-click kill with confirmation if applicable.\n- Allow horizontal tab scrolling (mouse wheel or key) to reveal hidden tabs when overflowed.\n- Keep tab rendering aligned with header overlay padding and viewport width.\n- Ensure tabs remain usable alongside list/create modals (no mouse bleed-through).\n\nAcceptance:\n- Active tab is always visible; overflow indicators are present when tabs are hidden.\n- Clicking a tab switches sessions; middle-clicking kills the session (with confirmation if required).\n- Overflow indicators are non-interactive and do not trigger session switches.\n- Session state is visible in the tab bar and consistent with list view.\n- No regressions to existing keyboard navigation or attach flow.\n\nDependencies:\n- vtr-12j (Attach mouse capture + coordinate mapping)\n- vtr-4vi (M8 - Attach TUI Mouse Support)\n\nNotes:\n- Coordinate with vtr-2wy for clickable tab behavior.","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-21T20:32:49.877414746Z","created_by":"ubuntu","updated_at":"2026-01-21T22:57:58.896845564Z","closed_at":"2026-01-21T22:57:58.896789917Z","close_reason":"Completed","compaction_level":0,"original_size":0,"labels":["area:tui"]}
{"id":"vtr-1er","title":"Subscribe keyframe semantics + gating","description":"Implement Subscribe semantics for keyframes and include_screen_updates gating.\n\nScope:\n- Server sends initial keyframe only when include_screen_updates is true.\n- Include frame_id/base_frame_id/is_keyframe in ScreenUpdate.\n- Send final keyframe before session_exited.\n- Maintain INVALID_ARGUMENT when no stream types requested.\n\nFiles: server/grpc.go, server/output.go (or current Subscribe implementation).","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-20T20:34:55.181704622Z","created_by":"ubuntu","updated_at":"2026-01-20T22:11:39.743976450Z","closed_at":"2026-01-20T22:11:39.743893589Z","close_reason":"Completed","compaction_level":0,"original_size":0,"labels":["area:server","area:streaming","milestone:M6_5"],"dependencies":[{"issue_id":"vtr-1er","depends_on_id":"vtr-1kt","type":"parent-child","created_at":"2026-01-26T17:41:06Z","created_by":"import"}]}
{"id":"vtr-1gc","title":"Testing overhaul proposal","description":"Summary\n- Simplify test taxonomy into 3 tiers: unit, integration, e2e.\n- Create shared harness so agents can add tests quickly.\n- Focus e2e on real user flows: hub+coordinator, hub-only+spoke, web UI, CLI.\n\nGoals\n- Fewer, clearer test categories with scope boundaries.\n- High-value coverage of product behaviors (CLI + web UI + federation).\n- Reusable setup/teardown so new tests are ~10-20 lines.\n\nProposed structure\n- tests/README.md: single source of truth (how to run, add, CI).\n- tests/harness/: shared helpers (hub/spoke/cli/web, config dir, ports, logs).\n- tests/integration/ (Go):\n  - hub_local_test.go: hub with coordinator enabled, spawn/list/send/subscribe.\n  - hub_no_coordinator_test.go: hub-only rejects local sessions.\n  - federation_routing_test.go: tunnel routing uses spoke.\n- tests/e2e/:\n  - cli_hub_local_test.go: CLI -> hub+coordinator flow.\n  - cli_hub_spoke_test.go: CLI -> hub-only -> spoke flow.\n  - web_hub_local.spec.ts: Playwright against hub+coordinator.\n  - web_hub_spoke.spec.ts: Playwright against hub-only+spoke.\n- web/tests/: keep only web unit tests (no process spawning).\n\nHigh-value behaviors to assert\n- Web UI: attach, input, ANSI attrs, resize, reconnect.\n- CLI: spawn/send/wait/grep/idle through hub.\n- Federation: hub-only routes to spoke, session lists preserve spoke names.\n\nScreenshots policy\n- Drop CAPTURE_SCREENSHOTS=1 as a gating path for core tests.\n- Use Playwright defaults: screenshots on failure, or a separate visual suite.\n- Optionally add 1-2 deterministic snapshot-based UI assertions.\n\nMigration plan\n1) Introduce tests/README + harness stubs.\n2) Move existing web e2e tests into tests/e2e and refactor to harness.\n3) Add hub-only + spoke e2e coverage for CLI and web.\n4) Trim old ad-hoc tests and document updated workflow.\n\nOpen questions\n- Should we keep any Playwright tests colocated under web/?\n- Desired CI split (unit/integration/e2e) and thresholds for PR gates.","notes":"Add integration test: TUI default attach through hub-only + spoke (coordinator disabled) to ensure session selection uses SubscribeSessions snapshot and routes by coordinator.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-27T23:48:54.057878093Z","created_by":"ubuntu","updated_at":"2026-02-05T22:36:35.693999234Z","compaction_level":0,"original_size":0,"labels":["cleanup"]}
{"id":"vtr-1gh","title":"Tokyo Night UI spec + responsive layout","description":"Implement Tokyo Night UI spec with responsive mobile-first layout.\n\nScope:\n- CSS variables per docs/spec.md (Tokyo Night palette).\n- 44px touch targets, consistent spacing, typography.\n- Avoid layout jumps on font load.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-20T20:34:55.635671606Z","created_by":"ubuntu","updated_at":"2026-01-20T21:21:19.375614628Z","closed_at":"2026-01-20T21:21:19.375555664Z","close_reason":"Completed","compaction_level":0,"original_size":0,"labels":["area:web","milestone:M7_1"],"dependencies":[{"issue_id":"vtr-1gh","depends_on_id":"vtr-6ia","type":"parent-child","created_at":"2026-01-26T17:41:06Z","created_by":"import"}]}
{"id":"vtr-1gwe","title":"vtr agent idle --screen flag","description":"Add --screen to vtr agent idle to return screen contents after the session goes idle, avoiding a follow-up get-screen call.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-28T18:21:14.134717240Z","created_by":"ubuntu","updated_at":"2026-02-02T17:48:57.121468823Z","closed_at":"2026-02-02T17:48:57.121372778Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"vtr-1i4","title":"Web UI: Chrome-style tab bar styling and seamless terminal transition","description":"Context: The tab bar should visually match a Chrome-style tab strip, with a seamless transition into the terminal content.\nScope:\n- Style the tab bar to resemble Chrome tabs (rounded corners, layered background, tab shapes).\n- Remove vertical spacing between the tab bar and the terminal window (flush edge).\n- Add a subtle background and rounded-corner transition between the tab bar and terminal panel.\nAcceptance:\n- Tab bar is visually flush with the terminal window (no vertical gap).\n- Tabs and bar styling read as Chrome-like (rounded edges, layered background).\n- The transition between tab bar and terminal panel feels cohesive and polished.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-21T20:27:34.855576592Z","created_by":"ubuntu","updated_at":"2026-01-21T20:39:15.803755195Z","closed_at":"2026-01-21T20:39:15.803651875Z","close_reason":"Completed","compaction_level":0,"original_size":0,"labels":["area:web"],"dependencies":[{"issue_id":"vtr-1i4","depends_on_id":"vtr-xob","type":"parent-child","created_at":"2026-01-26T17:41:06Z","created_by":"import"}]}
{"id":"vtr-1jc","title":"vtr agent send --submit flag","description":"Add --submit to vtr agent send to automatically send an Enter key after sending text (eliminate separate vtr agent key call).","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-28T18:21:05.235501422Z","created_by":"ubuntu","updated_at":"2026-02-02T17:42:39.009975785Z","closed_at":"2026-02-02T17:42:39.009918204Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"vtr-1kt","title":"M6.5 - TUI Streaming Updates","description":"Goal: Align TUI streaming behavior with the unified streaming design.\n\nContext:\n- See docs/streaming.md and streaming sections in docs/spec.md.\n- This milestone introduces frame_id/base_frame_id/is_keyframe + deltas.\n\nSuccess criteria:\n- TUI renders correctly with keyframes and resync handling\n- Latest-only behavior under backpressure\n- Subscribe semantics match docs/streaming.md and WS bridge behavior","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-20T20:34:54.991189962Z","created_by":"ubuntu","updated_at":"2026-01-20T22:12:22.601531107Z","closed_at":"2026-01-20T22:12:22.601481291Z","close_reason":"Completed","compaction_level":0,"original_size":0,"labels":["area:streaming","milestone:M6_5"],"dependencies":[{"issue_id":"vtr-1kt","depends_on_id":"vtr-3jv","type":"blocks","created_at":"2026-01-26T17:41:06Z","created_by":"import"}]}
{"id":"vtr-1lo","title":"Web UI: Add bottom padding/safe area to layout","description":"Context: App layout in web/src/App.tsx uses full-height sections; on mobile the ActionTray/InputBar can sit flush with the viewport bottom.\nScope:\n- Add bottom padding/safe-area inset for the main layout and/or terminal section so UI elements do not touch the bottom edge.\n- Keep spacing consistent on desktop and mobile.\nAcceptance:\n- No component intersects the bottom edge on common viewport sizes.\n- iOS safe-area inset is respected (home indicator not overlapping UI).","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-20T22:05:31.041659621Z","created_by":"ubuntu","updated_at":"2026-01-20T22:47:28.715610660Z","closed_at":"2026-01-20T22:47:28.715551766Z","close_reason":"Completed","compaction_level":0,"original_size":0,"labels":["area:web"],"dependencies":[{"issue_id":"vtr-1lo","depends_on_id":"vtr-xob","type":"parent-child","created_at":"2026-01-26T17:41:06Z","created_by":"import"}]}
{"id":"vtr-1m8","title":"M3 - gRPC Server Core","description":"Goal: Expose core session management and screen/input operations over gRPC.\n\nDeliverables:\n- gRPC server on Unix socket with Spawn/List/Info/Kill/Remove\n- GetScreen/SendText/SendKey/SendBytes/Resize RPCs\n- cmd/vtr serve\n- gRPC integration tests with PTY-backed session\n\nSuccess criteria:\n- vtr serve works via Unix socket\n- RPCs return correct state + error codes\n- Tests validate screen after SendText + resize\n\nHistorical: completed 2026-01-18; migrated from docs/progress.md.","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-20T20:33:13.249035230Z","created_by":"ubuntu","updated_at":"2026-01-20T20:34:54.877154871Z","closed_at":"2026-01-20T20:34:54.877095365Z","close_reason":"historical","compaction_level":0,"original_size":0,"labels":["area:server","milestone:M3"]}
{"id":"vtr-1ma","title":"Align WS server behavior with docs","description":"Align WS server behavior with docs.\n\nScope:\n- Confirm error frames, resize flow, and compression defaults.\n- Update docs/spec.md or server code to match reality.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-20T20:34:55.878547087Z","created_by":"ubuntu","updated_at":"2026-01-20T21:33:36.474704846Z","closed_at":"2026-01-20T21:33:36.474631724Z","close_reason":"Completed","compaction_level":0,"original_size":0,"labels":["area:docs","area:web","milestone:M7_1"],"dependencies":[{"issue_id":"vtr-1ma","depends_on_id":"vtr-6ia","type":"parent-child","created_at":"2026-01-26T17:41:06Z","created_by":"import"}]}
{"id":"vtr-1ns","title":"Web UI: Clip terminal row overflow","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-21T18:00:39.735086114Z","created_by":"ubuntu","updated_at":"2026-01-21T18:00:46.844509612Z","closed_at":"2026-01-21T18:00:46.844454736Z","close_reason":"Completed","compaction_level":0,"original_size":0,"labels":["area:web"]}
{"id":"vtr-1o26","title":"Repackage Go packages (import-only changes)","description":"Scope from docs/architecture-review.md (2026-02-05). Goal: restructure Go packages for clearer layering with *no logic changes* beyond file moves, package declarations, and import updates.\n\nTarget layout (proposed):\n- internal/core: coordinator.go, idle.go, wait.go, grep.go, output.go (Session + Coordinator domain)\n- internal/pty: pty.go, dsr.go (PTY + DSR scan)\n- internal/vt: vt.go (Ghostty wrapper)\n- internal/transport/grpc: grpc.go (gRPC server + mappings)\n- internal/transport/web: HTTP/WS handlers from cmd/vtr/web_cmd.go\n- internal/federation: cmd/vtr/federation.go + cmd/vtr/tunnel.go + server/federation.go (SpokeRegistry + tunnel + hub aggregation)\n- cmd/vtr: reduced to flag parsing + wiring (calls internal packages)\n\nConstraints:\n- No functional logic changes; only moves/renames/import fixes + minimal wiring changes to keep behavior identical.\n- Move tests with their packages; update package names/imports accordingly.\n- Keep go.mod module path unchanged.\n- Ensure build/test commands in mise.toml still work.\n\nDeliverables:\n- Updated package paths + imports.\n- Updated docs/README or docs/architecture.md only if needed to reflect new package structure.\n- Clean build (`mise run test`) or documented if not run.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-05T21:56:47.483398908Z","created_by":"ubuntu","updated_at":"2026-02-05T23:11:45.001106202Z","closed_at":"2026-02-05T23:11:45.001047419Z","close_reason":"Completed","compaction_level":0,"original_size":0,"labels":["cleanup"]}
{"id":"vtr-1p4","title":"Mouse mode tracking (shim + Subscribe)","description":"Expose mouse mode via Ghostty shim and broadcast changes on Subscribe.\n\nScope:\n- Add vtr_ghostty_terminal_mouse_mode in shim + Go wrapper.\n- Track per-session mode and emit MouseModeChanged events.\n- Send current mode on Subscribe start.","status":"blocked","priority":2,"issue_type":"task","created_at":"2026-01-20T20:34:55.967634610Z","created_by":"ubuntu","updated_at":"2026-01-20T22:15:00.441423451Z","compaction_level":0,"original_size":0,"labels":["area:ghostty","area:server","milestone:M8"],"dependencies":[{"issue_id":"vtr-1p4","depends_on_id":"vtr-1r7","type":"blocks","created_at":"2026-01-26T17:41:07Z","created_by":"import"},{"issue_id":"vtr-1p4","depends_on_id":"vtr-4vi","type":"parent-child","created_at":"2026-01-26T17:41:07Z","created_by":"import"}]}
{"id":"vtr-1qo","title":"Stabilize TUI coordinator tab ordering","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-27T20:26:59.975500440Z","created_by":"ubuntu","updated_at":"2026-01-27T20:27:20.346823506Z","closed_at":"2026-01-27T20:27:20.346764563Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"vtr-1r7","title":"Begin Mouse Work","description":"Gate to start mouse work. Keep mouse-related tasks blocked until this is closed. Close this issue to unblock the M8 mouse tasks.","status":"blocked","priority":2,"issue_type":"task","created_at":"2026-01-20T21:20:30.756230182Z","created_by":"ubuntu","updated_at":"2026-01-20T22:13:24.398892463Z","compaction_level":0,"original_size":0,"labels":["area:tui","milestone:M8"],"dependencies":[{"issue_id":"vtr-1r7","depends_on_id":"vtr-4vi","type":"parent-child","created_at":"2026-01-26T17:41:07Z","created_by":"import"}]}
{"id":"vtr-1rfz","title":"TUI: overhaul status icons with Nerd Fonts + animated working state","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-30T00:08:53.128608460Z","created_by":"ubuntu","updated_at":"2026-01-30T00:13:41.931006443Z","closed_at":"2026-01-30T00:13:41.930930627Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"vtr-1vd2","title":"Systemd user service integration for vtr hub","description":"Add systemd user service install/uninstall and CLI commands: vtr service install/status/start/stop/restart/logs/uninstall for hub.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-29T00:29:05.587936564Z","created_by":"ubuntu","updated_at":"2026-02-02T19:06:25.195525373Z","closed_at":"2026-02-02T19:06:25.195450968Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"vtr-1vh","title":"Fix Coordinator Close method name conflict","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-21T23:25:39.496070742Z","created_by":"ubuntu","updated_at":"2026-01-21T23:25:42.281223267Z","closed_at":"2026-01-21T23:25:42.281168411Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"vtr-1w3","title":"Homebrew packaging for multi-platform/architecture installs","description":"Provide Homebrew formula/tap for vtr with bottles for macOS + Linux across common architectures. Document installation steps and ensure release artifacts match brew expectations (checksums, versioning).","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-23T00:29:32.910647283Z","created_by":"ubuntu","updated_at":"2026-01-23T18:48:59.792202596Z","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"vtr-1w3","depends_on_id":"vtr-2to","type":"blocks","created_at":"2026-01-26T17:41:07Z","created_by":"import"},{"issue_id":"vtr-1w3","depends_on_id":"vtr-y5c","type":"blocks","created_at":"2026-01-26T17:41:07Z","created_by":"import"}]}
{"id":"vtr-1xt","title":"Federation: Draft hub-and-spoke architecture proposal","description":"Context: The hub-and-spoke coordinator federation needs an initial architectural proposal before implementation.\nScope:\n- Produce a markdown document under docs/ with a straw-man architecture for hub-and-spoke federation.\n- Enumerate at least 2 alternative architectures and tradeoffs.\n- Capture open questions/decisions for human review.\n- Keep doc scoped to coordinator federation + Tailscale transport integration.\nAcceptance:\n- New docs/*.md file exists with straw-man design, alternatives, and open questions.\n- Proposal aligns with the federation epic goals and constraints (hub serving web UI, optional UDS).\n- Open questions are explicit and actionable.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-21T02:07:29.858045609Z","created_by":"ubuntu","updated_at":"2026-01-21T02:10:53.681498441Z","closed_at":"2026-01-21T02:10:53.681393408Z","close_reason":"Completed","compaction_level":0,"original_size":0,"labels":["area:docs","area:federation"],"dependencies":[{"issue_id":"vtr-1xt","depends_on_id":"vtr-tnj","type":"parent-child","created_at":"2026-01-26T17:41:07Z","created_by":"import"}]}
{"id":"vtr-1xzb","title":"Web UI type layering cleanup","description":"From docs/architecture-review.md: remove lib->component dependency in web UI.\n\nPlan:\n- Create `web/src/types/session.ts` (or `web/src/types/vtr.ts`) to hold `SessionInfo`, `CoordinatorInfo`, and any shared session types used outside components.\n- Update `web/src/components/CoordinatorTree.tsx` to import types from `web/src/types/...`.\n- Update `web/src/lib/api.ts`, `web/src/lib/session.ts`, `web/src/lib/ws.ts` to import types from `web/src/types/...` instead of from components.\n- Keep API contracts and behavior unchanged.\n\nDeliverables:\n- New types file and updated imports.\n- No runtime behavior changes.","status":"open","priority":3,"issue_type":"task","created_at":"2026-02-05T21:57:00.225151748Z","created_by":"ubuntu","updated_at":"2026-02-05T21:58:52.218839936Z","compaction_level":0,"original_size":0,"labels":["cleanup"]}
{"id":"vtr-1y9","title":"Web UI: Auto-scale terminal font to fit columns","description":"Context: Web terminal text size is fixed, so column alignment and readability suffer across varying viewport widths.\nScope:\n- Dynamically scale terminal font size to fit the available column width in the browser.\n- Scale up/down smoothly as the viewport resizes, without jitter.\n- Preserve correct cell sizing and cursor alignment during scaling.\nAcceptance:\n- Terminal text scales to match the number of columns in the viewport without horizontal clipping.\n- Resizing the browser smoothly adjusts font size in both directions.\n- Cell alignment/cursor rendering remain accurate while scaling.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-21T01:28:06.088803142Z","created_by":"ubuntu","updated_at":"2026-01-21T01:48:56.324517165Z","closed_at":"2026-01-21T01:48:56.324462308Z","close_reason":"Completed","compaction_level":0,"original_size":0,"labels":["area:web"],"dependencies":[{"issue_id":"vtr-1y9","depends_on_id":"vtr-xob","type":"parent-child","created_at":"2026-01-26T17:41:07Z","created_by":"import"}]}
{"id":"vtr-1ym","title":"M1 - Ghostty Shim + Go Wrapper","description":"Goal: Prove VT engine integration and snapshot/dump access via go-ghostty.\n\nDeliverables:\n- go-ghostty/shim builds libvtr-ghostty-vt.a + header\n- vtr_ghostty_* API per go-ghostty/README.md\n- Go wrapper Terminal/Snapshot/Dump APIs\n- Tests feeding ANSI and asserting snapshot/dump\n\nSuccess criteria:\n- go test ./go-ghostty/... passes locally\n- Snapshot/cursor correctness validated\n- Snapshot/dump ownership handled without leaks\n\nHistorical: completed 2026-01-18; migrated from docs/progress.md.","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-20T20:33:13.210040106Z","created_by":"ubuntu","updated_at":"2026-01-20T20:34:54.830957709Z","closed_at":"2026-01-20T20:34:54.830901190Z","close_reason":"historical","compaction_level":0,"original_size":0,"labels":["area:ghostty","milestone:M1"]}
{"id":"vtr-22h","title":"Web UI: Sort session tree with exited sessions last","description":"Context: Session tree mixes running and exited sessions, making active sessions harder to find.\nScope:\n- Reorder sessions within each coordinator so running sessions appear first and exited sessions appear last.\n- Preserve existing coordinator grouping and any other ordering within each status group.\nAcceptance:\n- Each coordinator lists running sessions before exited sessions.\n- Coordinator grouping remains unchanged.\n- No UI regressions in session selection/attach.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-20T22:52:40.168284176Z","created_by":"ubuntu","updated_at":"2026-01-20T22:55:07.494558203Z","closed_at":"2026-01-20T22:55:07.494502235Z","close_reason":"Completed","compaction_level":0,"original_size":0,"labels":["area:web"],"dependencies":[{"issue_id":"vtr-22h","depends_on_id":"vtr-xob","type":"parent-child","created_at":"2026-01-26T17:41:07Z","created_by":"import"}]}
{"id":"vtr-22k","title":"Support for renaming tabs in the terminal UI","description":"Renaming a tab in the web UI causes the terminal UI to crash with 'session not found'. Add support/handling for tab renames in the terminal UI.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-26T17:21:51.099130031Z","created_by":"ubuntu","updated_at":"2026-01-26T17:42:45.186963095Z","closed_at":"2026-01-26T17:42:45.186905052Z","close_reason":"Completed (handled in 06fe5cd)","compaction_level":0,"original_size":0}
{"id":"vtr-244","title":"TUI: Leader key footer with Zellij-style hints","description":"Replace bottom status time with leader key hint; when leader active show available commands sorted by usefulness. Use Zellij-style Nerd font chevron glyphs + colored key.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-20T22:20:45.577911371Z","created_by":"ubuntu","updated_at":"2026-01-20T22:34:05.962138106Z","closed_at":"2026-01-20T22:34:05.962083671Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"vtr-24b","title":"Web UI: Move session filter into left panel","description":"Context: Session filter input is not co-located with the session tree, making discovery slower.\nScope:\n- Move the filter text box into the left-hand session selection panel.\n- Keep filter behavior unchanged.\n- Ensure layout works on desktop and mobile.\nAcceptance:\n- Filter input appears in the session selection left panel.\n- Filtering still affects the session tree as before.\n- Mobile/desktop layouts remain usable.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-20T22:52:56.235492511Z","created_by":"ubuntu","updated_at":"2026-01-20T22:54:31.282239855Z","closed_at":"2026-01-20T22:54:31.282184769Z","close_reason":"Completed","compaction_level":0,"original_size":0,"labels":["area:web"],"dependencies":[{"issue_id":"vtr-24b","depends_on_id":"vtr-xob","type":"parent-child","created_at":"2026-01-26T17:41:07Z","created_by":"import"}]}
{"id":"vtr-24v","title":"TUI: Zellij-style bottom bar legend for leader commands","description":"Context: The TUI bottom bar needs a clearer, Zellij-style command legend.\nScope:\n- Revamp the bottom bar to show only the leader key in normal mode.\n- When the leader key is pressed, replace the bar with the Zellij-style command legend (single-line, left-to-right segments with chevron separators, prefix `Ctrl +`, each segment formatted `<key> LABEL`).\n- Use the segment order and labels from the provided spec: <g> LOCK, <p> PANE, <t> TAB, <n> RESIZE, <h> MOVE, <s> SEARCH, <o> SESSION, <q> QUIT.\n- Keep the bar informational (static text), not interactive widgets.\nAcceptance:\n- Normal mode bottom bar shows only the leader key hint.\n- After leader is pressed, the bar shows the Zellij-style legend with chevron separators and the specified segments.\n- Legend is one terminal row, spans full width, and does not change input handling beyond existing leader behavior.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-20T22:57:19.882411737Z","created_by":"ubuntu","updated_at":"2026-01-20T23:21:51.128342214Z","closed_at":"2026-01-20T23:21:51.128271137Z","close_reason":"Completed","compaction_level":0,"original_size":0,"labels":["area:tui"]}
{"id":"vtr-24x","title":"TUI tab bar: remove intra-coordinator separators","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-27T20:38:05.452258849Z","created_by":"ubuntu","updated_at":"2026-01-27T20:38:13.512435892Z","closed_at":"2026-01-27T20:38:13.512379673Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"vtr-26l","title":"vtr agent accept coordinator:session addressing","description":"Allow vtr agent subcommands to accept <coordinator>:<session> in place of UUIDs. The agent CLI is a client; users shouldn't need internal UUIDs. Add parsing + resolution where session refs are read.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-28T18:21:02.281535765Z","created_by":"ubuntu","updated_at":"2026-01-28T18:30:16.771654689Z","closed_at":"2026-01-28T18:30:16.771599031Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"vtr-26t","title":"Web UI: push session list over WebSocket (no /api/sessions polling)","description":"Web UI currently polls /api/sessions. Replace with server-pushed session list/state over the existing websocket (Subscribe/Any). Define new WS message/event for session list updates, update web client to consume it, and remove polling interval.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-22T17:11:03.725901984Z","created_by":"ubuntu","updated_at":"2026-01-26T18:26:13.830352204Z","closed_at":"2026-01-26T18:26:13.830294273Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"vtr-27e","title":"TUI + button should open spoke session when hub coordinator disabled","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-27T19:57:41.989823700Z","created_by":"ubuntu","updated_at":"2026-01-27T20:02:34.476614401Z","closed_at":"2026-01-27T20:02:34.476556468Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"vtr-27g","title":"CLI: implement vtr spoke (coordinator)","description":"Implement new spoke command in cmd/vtr/spoke.go. Behavior: start local coordinator, serve gRPC on unix socket (default /var/run/vtrpc.sock) and optional TCP (default 127.0.0.1:4621). Accept --hub host:port for future federation; for now, validate reachability (dial + log) or store in logs without hard dependency. Use TLS+token when dialing hub if provided in config. Read defaults from vtrpc.toml (VTRPC_CONFIG_DIR). Do NOT edit cmd/vtr/root.go in this bead.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-22T05:33:51.783481254Z","created_by":"ubuntu","updated_at":"2026-01-22T06:06:04.627643304Z","closed_at":"2026-01-22T06:06:04.627588057Z","close_reason":"Completed","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"vtr-27g","depends_on_id":"vtr-2ox","type":"blocks","created_at":"2026-01-26T17:41:07Z","created_by":"import"},{"issue_id":"vtr-27g","depends_on_id":"vtr-mvg","type":"blocks","created_at":"2026-01-26T17:41:07Z","created_by":"import"}]}
{"id":"vtr-27h","title":"Web UI: Create new sessions","description":"Context: The web UI can list/attach sessions but cannot create new sessions directly.\nScope:\n- Add a \"new tab\" button in the session tab bar to create a new session.\n- Create sessions with a default name (no input required at creation time).\n- Wire the UI to the coordinator API that creates sessions.\n- Update the session list/tabs after creation and optionally auto-attach the new session.\nAcceptance:\n- User can create a session from the tab bar without leaving the page.\n- New session is created with a default name (no input prompt).\n- New session appears in tabs and session list immediately.\n- Optional auto-attach behavior is defined and consistent.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-21T02:01:31.128814384Z","created_by":"ubuntu","updated_at":"2026-01-21T04:04:49.929418984Z","closed_at":"2026-01-21T02:46:06.761974224Z","close_reason":"Completed","compaction_level":0,"original_size":0,"labels":["area:web"],"dependencies":[{"issue_id":"vtr-27h","depends_on_id":"vtr-xob","type":"parent-child","created_at":"2026-01-26T17:41:07Z","created_by":"import"}]}
{"id":"vtr-27u","title":"Enable web UI scrollback via mouse wheel","description":"Allow mouse wheel scrolling in web UI and auto-enter scrollback when user scrolls.","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-23T18:50:21.050982100Z","created_by":"ubuntu","updated_at":"2026-01-23T18:50:21.050982100Z","compaction_level":0,"original_size":0}
{"id":"vtr-299","title":"M10 - Build System (mise)","description":"Goal: Standardize tool versions and task automation via mise.\n\nDeliverables:\n- mise.toml with Go/Zig/clang versions and tasks for shim/build/test/all\n- Onboarding: mise trust/install/run all\n- Docs align CGO toolchain env vars with tasks\n\nSuccess criteria:\n- mise run all builds shim and runs tests\n- Tool versions match go.mod + shim build.zig.zon\n\nHistorical: completed; migrated from docs/progress.md.","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-20T20:33:13.343812778Z","created_by":"ubuntu","updated_at":"2026-01-20T20:34:54.963766759Z","closed_at":"2026-01-20T20:34:54.963708466Z","close_reason":"historical","compaction_level":0,"original_size":0,"labels":["area:build","milestone:M10"]}
{"id":"vtr-29mj","title":"Patch 2: Web delta validation strictness (base/frame/size checks)","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-02-11T01:05:43.343371464Z","created_by":"ubuntu","updated_at":"2026-02-11T01:07:44.435981969Z","closed_at":"2026-02-11T01:07:44.435887626Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"vtr-29x","title":"Web UI: Desktop input UX (focus terminal, hide mobile controls)","description":"Context: App renders ActionTray and InputBar unconditionally in web/src/App.tsx; on desktop users expect direct key input to the terminal.\nScope:\n- Only show ActionTray/InputBar on mobile-sized viewports.\n- Auto-focus the terminal container on attach and allow direct key input without a text box.\n- Keep touch-friendly controls on mobile.\nAcceptance:\n- Desktop view hides the action tray and command input bar.\n- Terminal view receives focus and keyboard input directly on desktop.\n- Mobile behavior remains unchanged.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-20T22:05:39.937719410Z","created_by":"ubuntu","updated_at":"2026-01-20T22:46:15.611758572Z","closed_at":"2026-01-20T22:46:15.611658900Z","close_reason":"Completed","compaction_level":0,"original_size":0,"labels":["area:web"],"dependencies":[{"issue_id":"vtr-29x","depends_on_id":"vtr-xob","type":"parent-child","created_at":"2026-01-26T17:41:07Z","created_by":"import"}]}
{"id":"vtr-29y","title":"Web UI: allow new session when no sessions (add per-coordinator +)","description":"When there are zero sessions across coordinators, user can't open a new tab/session. Expect to be able to spawn in a coordinator even when empty. Likely needs a per-coordinator '+' button in the empty/coord list UI.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-26T23:51:47.282120463Z","created_by":"ubuntu","updated_at":"2026-01-27T19:04:06.642062328Z","closed_at":"2026-01-27T19:04:06.642011409Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"vtr-2a0","title":"TUI: Bind j/k for session navigation and x to kill","description":"Context: TUI session navigation/management keys need to be remapped to vim-style bindings for faster use.\nScope:\n- Bind `j` to next session and `k` to previous session in the TUI.\n- Bind `x` to kill the current session.\n- Update any on-screen help/legend to reflect the new key bindings.\nAcceptance:\n- Pressing `j` moves to the next session; `k` moves to the previous session.\n- Pressing `x` kills the current session (with existing confirmation behavior if any).\n- Key hints in the status/legend match the new bindings.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-20T23:10:37.724499195Z","created_by":"ubuntu","updated_at":"2026-01-20T23:13:32.087658167Z","closed_at":"2026-01-20T23:13:32.087602048Z","close_reason":"Completed","compaction_level":0,"original_size":0,"labels":["area:tui"]}
{"id":"vtr-2c4","title":"Web UI: Auto-create sessions with default non-colliding names","description":"Context: New session creation should be a single-click action without any modal or naming prompt.\nScope:\n- Create sessions automatically with a default non-colliding name.\n- Remove any modal/prompt from the new-session flow.\n- Ensure the new session appears immediately and optionally auto-attaches.\nAcceptance:\n- Creating a new session requires no modal or text input.\n- Session names are generated to avoid collisions.\n- New session appears in the UI immediately after creation.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-21T20:37:19.342256994Z","created_by":"ubuntu","updated_at":"2026-01-21T20:43:38.558654727Z","closed_at":"2026-01-21T20:43:38.558599741Z","close_reason":"Completed","compaction_level":0,"original_size":0,"labels":["area:web"],"dependencies":[{"issue_id":"vtr-2c4","depends_on_id":"vtr-xob","type":"parent-child","created_at":"2026-01-26T17:41:07Z","created_by":"import"}]}
{"id":"vtr-2c7","title":"Web UI: Use Tokyo Night default for terminal background","description":"Context: Terminal cell rendering in web/src/components/TerminalGrid.tsx maps bg=0 to #000000, so the grid appears pure black.\nScope:\n- Treat the default background color as Tokyo Night (e.g. --tn-bg-alt or --tn-panel) instead of #000000.\n- Preserve explicit ANSI colors when provided by the screen update.\nAcceptance:\n- Terminal background matches the Tokyo Night theme when the server does not set a custom bg color.\n- ANSI-specified bg colors still render correctly.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-20T22:05:35.805013108Z","created_by":"ubuntu","updated_at":"2026-01-20T22:47:07.656579364Z","closed_at":"2026-01-20T22:47:07.656524999Z","close_reason":"Completed","compaction_level":0,"original_size":0,"labels":["area:web"],"dependencies":[{"issue_id":"vtr-2c7","depends_on_id":"vtr-xob","type":"parent-child","created_at":"2026-01-26T17:41:07Z","created_by":"import"}]}
{"id":"vtr-2cl","title":"Web UI DOM renderer width smaller than expected vs canvas","description":"Observed in mise dev: DOM renderer shows narrower terminal width than expected; canvas renderer matches expected width. Likely CSS/measurement or cell sizing issue. Investigate DOM renderer sizing vs canvas path.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-22T04:32:50.695907122Z","created_by":"ubuntu","updated_at":"2026-01-22T04:36:42.861637566Z","closed_at":"2026-01-22T04:36:42.861532503Z","close_reason":"Disabled ligatures/kerning in DOM terminal grid to keep monospace advances consistent with measured cell width.","compaction_level":0,"original_size":0}
{"id":"vtr-2clv","title":"Tracing: implement OpenTelemetry baseline + tunnel propagation","description":"Context\n- docs/tracing.md specifies the OTel tracing strategy, but the codebase has no OTel setup or tunnel propagation today.\n- Traces should be centralized at the hub with a spoke spool fallback (hybrid sink, always on).\n\nScope (Phase 0-1)\n- Add OTel SDK init with resource attrs (service.name, service.version, coordinator.name).\n- Implement JSONL span exporter with hub canonical sink plus spoke rotating spool + backfill on reconnect.\n- Wire gRPC client/server stats handlers (otelgrpc) for coordinator + CLI clients; add otelhttp middleware for web bridge.\n- Add trace context propagation across the hub<->spoke tunnel (traceparent/tracestate/baggage fields on tunnel frames or request envelope) with inject/extract.\n- Add initial tunnel dispatch spans with call_id and coordinator/spoke attrs.\n\nAcceptance\n- Traces are emitted to hub JSONL without external backend.\n- Spokes buffer locally when hub is unreachable and backfill on reconnect; drops are counted.\n- Standard gRPC calls emit spans with trace IDs.\n- Tunnel-routed RPCs preserve trace context across hub<->spoke.\n- No regressions to existing gRPC or tunnel behavior.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-02-02T17:18:40.033748337Z","created_by":"ubuntu","updated_at":"2026-02-02T18:12:05.425273212Z","closed_at":"2026-02-02T18:12:05.425216753Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"vtr-2cr","title":"Web UI: Browser-style session tabs with context actions","description":"Context: Web UI needs a browser-like tabbed session interface; tab styling should closely resemble Chrome.\nScope:\n- Implement a tab bar where each session is represented as a tab, styled like Chrome (no gap between tab bar and content).\n- Use active tab highlighting and Chrome-like tab shapes/spacing.\n- Remove per-tab close buttons; rely on middle-click and context-menu close instead.\n- Support middle-click to close a tab/session.\n- Add a right-click context menu per tab with actions like close, send signals, and special/control characters.\n- Keep existing session list behaviors compatible or define how tabs replace/augment them.\nAcceptance:\n- Each session appears as a Chrome-style tab; switching tabs changes the active session.\n- There is no explicit close button on tabs; middle-click closes and context menu offers close.\n- Tab bar is visually flush with content (no spacing gap).\n- Right-clicking a tab opens a context menu with session-specific actions.\n- Tab UI is responsive and usable on desktop and mobile (appropriate adaptations).","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-21T02:06:03.024552556Z","created_by":"ubuntu","updated_at":"2026-01-21T04:06:35.722302819Z","closed_at":"2026-01-21T02:46:11.053615650Z","close_reason":"Completed","compaction_level":0,"original_size":0,"labels":["area:web"],"dependencies":[{"issue_id":"vtr-2cr","depends_on_id":"vtr-xob","type":"parent-child","created_at":"2026-01-26T17:41:07Z","created_by":"import"}]}
{"id":"vtr-2cu","title":"Document Ghostty OSC 133 shell integration for vtr","description":"Findings from ghostty (repo at /tmp/ghostty) on OSC 133 shell integration and prompt detection, plus proposal for vtr.\n\n1) OSC 133 lifecycle (prompt -> input -> output -> command-end)\n- A: fresh line / start prompt\n- B: end prompt / start input\n- C: end input / start output\n- D: end command (exit status)\nNotes: other actions (L/N/P/I) parsed but not used for state in Ghostty.\n\n2) How Ghostty parses OSC 133\n- src/terminal/osc.zig: OSC state machine recognizes 133 and dispatches to semantic_prompt parser.\n- src/terminal/osc/parsers/semantic_prompt.zig: parses A/B/C/D and options (aid, cl, k, redraw, special_key, click_events, exit_code).\n\n3) Row-based semantic prompt state tracking\n- src/terminal/page.zig: row.semantic_prompt enum: unknown, prompt, prompt_continuation, input, command.\n- src/termio/stream_handler.zig: on semantic prompt:\n  - A -> mark prompt/prompt_continuation (k= prompt kind)\n  - B -> mark input\n  - C -> mark command and emit start_command\n  - D -> emit stop_command(exit code)\n- src/terminal/Terminal.zig: cursorIsAtPrompt() scans rows upward; prompt/input => true, command => false, unknown => keep searching.\n\n4) Shell integration scripts emitting OSC 133\n- bash: src/shell-integration/bash/ghostty.bash\n  - preexec: OSC 133;C\n  - precmd: OSC 133;D;status;aid=... then OSC 133;A;aid=...\n  - injects OSC 133;B in PS1/PS2 for end-prompt/start-input; k=s for multiline prompt\n  - emits OSC 7 (pwd)\n- zsh: src/shell-integration/zsh/ghostty-integration\n  - preexec emits C; precmd emits D and A; manages state to close unclosed C\n  - adds prompt marks into PS1/PS2 when possible; k=s for multiline\n- fish: src/shell-integration/fish/vendor_conf.d/ghostty-shell-integration.fish\n  - fish_prompt -> A, fish_preexec -> C, fish_postexec -> D; emits OSC 7\n\n5) Proposal for vtr\nParsing:\n- Parse OSC 133 A/B/C/D with options (aid, k, exit_code; others optional).\n\nState tracking:\n- Per-row semantic prompt state (unknown/prompt/continuation/input/command).\n- Per-session ShellState:\n  - busy = true after C until D\n  - at_prompt = true if cursor row (or last-known prompt row) is prompt/input\n  - last_exit_code, last_activity_id\n  - confidence flag if no OSC 133 seen\n\nExposure via gRPC:\n- Add shell_state to SessionInfo + streaming updates:\n  - busy, at_prompt, last_exit_code, last_activity_id\n- WaitForIdle should prefer OSC 133 markers, fallback to output-idle timers when markers absent.\n\nOptional: Provide minimal vtr shell integration scripts (bash/zsh/fish) that emit A/B/C/D and OSC 7.","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-26T17:15:13.948965835Z","created_by":"ubuntu","updated_at":"2026-01-27T22:03:28.995192719Z","compaction_level":0,"original_size":0}
{"id":"vtr-2cv","title":"CGO race test target","description":"Add Go race detector target for CGO boundary packages.\n\nScope:\n- go test -race for go-ghostty and server packages that touch VT.\n- Wire into mise tasks.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-20T20:34:56.207971596Z","created_by":"ubuntu","updated_at":"2026-01-20T21:34:16.409644084Z","closed_at":"2026-01-20T21:34:16.409587674Z","close_reason":"Completed","compaction_level":0,"original_size":0,"labels":["area:testing","milestone:M9"],"dependencies":[{"issue_id":"vtr-2cv","depends_on_id":"vtr-uoj","type":"parent-child","created_at":"2026-01-26T17:41:07Z","created_by":"import"}]}
{"id":"vtr-2e8","title":"Update vtr spoke to client-only hub connector","description":"Goal: Update `vtr spoke` so it naively connects to the hub (no local socket by default). Provide an optional pathway to keep the old local socket behavior if needed.\n\nContext (current behavior)\n- `cmd/vtr/spoke.go` always starts a local Unix gRPC listener via `server.ServeUnix(ctx, coord, socketPath)`.\n- It optionally starts TCP gRPC if `--grpc-addr` is set.\n- `--hub` only validates reachability via `dialHub` (no registration/aggregation).\n- Config resolution defaults `socketPath` to `cfg.Hub.GrpcSocket` and `grpcAddr` to `cfg.Hub.GrpcAddr` (legacy). This can clobber the hub socket.\n- Hub uses a unified address for gRPC+web via `cfg.Hub.Addr` (`cmd/vtr/hub.go`, `cmd/vtr/config.go`).\n\nDesired behavior\n1) Spoke should act as a â€œclient-onlyâ€ connector to the hub by default:\n   - No local socket server unless explicitly requested.\n   - It should connect to hub address (`--hub` or `cfg.Hub.Addr`) and register itself / enable proxying.\n   - If federation is already implemented in server code, wire to that; if not, implement minimal registration RPC in proto + server.\n\n2) Optional alternate pathway (recommended)\n   - Keep a flag (e.g. `--local-socket` or `--serve-socket`) to start the old local Unix socket for compatibility / debugging.\n   - Default should be OFF to avoid clobbering the hub socket and to align with spoke-as-client.\n   - Rationale: local socket is still useful for local clients, offline use, or incremental migration.\n\nImplementation notes\n- CLI flags:\n  - Add `--serve-socket` (bool) and `--socket` (path) to explicitly enable local UDS.\n  - Keep `--grpc-addr` only if you still intend to expose TCP (likely off by default).\n  - If neither `--serve-socket` nor `--grpc-addr` are set, spoke should not bind locally.\n\n- Config resolution:\n  - Use `cfg.Hub.Addr` as the primary hub address for spoke connection.\n  - Avoid defaulting spoke socket to `cfg.Hub.GrpcSocket` (prevents clobbering hub).\n\n- Federation handshake:\n  - Add/confirm RPC: `RegisterSpoke` on hub (or a lightweight heartbeat).\n  - Spoke should provide: name, address (if reachable), metadata (maybe version, labels).\n  - Hub should track spoke list and proxy List/Info/Send/etc using `spoke:session`.\n\n- Observability:\n  - Log hub connection + registration success/failure.\n  - Provide a simple retry loop or periodic heartbeat to keep status fresh.\n\n- Tests:\n  - Unit test that spoke doesnâ€™t bind sockets unless flag is set.\n  - Integration test: hub running, spoke connects, hub lists spoke sessions.\n\nDeliverables\n- Updated `cmd/vtr/spoke.go` behavior and flags.\n- Any proto + server changes required for registration / federation.\n- Documentation updates in `docs/spec.md` or `docs/federation-hub-spoke.md` reflecting new defaults.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-26T17:30:43.880417996Z","created_by":"ubuntu","updated_at":"2026-01-26T17:49:51.697039028Z","closed_at":"2026-01-26T17:49:51.696982167Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"vtr-2en","title":"Frontend UI + Tokyo Night layout","description":"Build the React + shadcn/ui frontend with Tokyo Night palette and JetBrains Mono.\n\nScope:\n- Mobile-first layout, action tray, bottom input bar.\n- Implement coordinator tree and session attach view.\n- Use Tailwind theme tokens per docs/spec.md.\n\nFiles: web/src, web/tailwind.config.ts, web/src/styles.css.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-20T20:34:55.351317100Z","created_by":"ubuntu","updated_at":"2026-01-20T21:20:56.501436508Z","closed_at":"2026-01-20T21:20:56.501342035Z","close_reason":"Completed","compaction_level":0,"original_size":0,"labels":["area:web","milestone:M7"],"dependencies":[{"issue_id":"vtr-2en","depends_on_id":"vtr-xob","type":"parent-child","created_at":"2026-01-26T17:41:07Z","created_by":"import"}]}
{"id":"vtr-2f5","title":"M2 - Coordinator Core (No gRPC Yet)","description":"Goal: Build in-process session management and PTY plumbing around the VT engine.\n\nDeliverables:\n- server/coordinator.go session registry\n- server/pty.go PTY lifecycle + resize + I/O\n- server/vt.go snapshot + scrollback adapters\n- Tests for spawn/echo, kill/remove, exit codes, screen capture\n\nSuccess criteria:\n- Sessions spawn, accept input, and exit cleanly\n- Screen snapshots and scrollback behave as expected\n- go test ./server/... covers core transitions\n\nHistorical: completed 2026-01-18; migrated from docs/progress.md.","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-20T20:33:13.229661782Z","created_by":"ubuntu","updated_at":"2026-01-20T20:34:54.853445855Z","closed_at":"2026-01-20T20:34:54.853391270Z","close_reason":"historical","compaction_level":0,"original_size":0,"labels":["area:server","milestone:M2"]}
{"id":"vtr-2g2","title":"Standard VTR agent skill (enable effective vtr usage)","description":"Define and add a standard agent skill that teaches agents how to use vtr effectively. Must cover main commands (especially vtr agent subcommands) and include explicit guidance to run vtr agent --help and vtr --help and ensure help output is useful. Explain that BTR can act as the harness mechanism to manage subagents, where each subagent maps to a named vtr session running codex, Pi, or other agents. Include examples and pointers to docs.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-23T00:30:30.455533184Z","created_by":"ubuntu","updated_at":"2026-01-23T18:50:36.525565750Z","closed_at":"2026-01-23T18:50:36.525475957Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"vtr-2hi","title":"Tests: update CLI/config tests for new vtrpc CLI","description":"Update cmd/vtr/client_test.go and related CLI tests to match new command tree (hub/spoke/agent/tui/setup), JSON-only agent output, and vtrpc.toml config path. Remove or replace config resolve tests. Ensure tests use /tmp/vtrpc.sock + ports 4620/4621 and the new --hub flag. This bead should avoid changing command implementations; focus on tests + fixtures.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-22T05:34:35.115314275Z","created_by":"ubuntu","updated_at":"2026-01-22T06:32:56.055257042Z","closed_at":"2026-01-22T06:32:56.055201495Z","close_reason":"Completed","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"vtr-2hi","depends_on_id":"vtr-2hw","type":"blocks","created_at":"2026-01-26T17:41:07Z","created_by":"import"}]}
{"id":"vtr-2hj","title":"Web UI: Clip terminal row vertical overflow","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-21T18:04:36.078346482Z","created_by":"ubuntu","updated_at":"2026-01-21T18:04:40.211280772Z","closed_at":"2026-01-21T18:04:40.211206850Z","close_reason":"Completed","compaction_level":0,"original_size":0,"labels":["area:web"]}
{"id":"vtr-2hw","title":"CLI: overhaul command tree (hub/spoke/agent/tui/setup)","description":"Refactor cmd/vtr/root.go to expose only hub, spoke, agent, tui, setup, version. Remove serve, web, config, attach commands from root. Wrap existing client commands under agent (JSON-only output; remove --json flag + human output). Replace --socket with --hub (accept addr or unix socket path). Rename attach TUI to tui command and update help strings. Update cmd/vtr/client.go, cmd/vtr/output.go, cmd/vtr/attach.go accordingly. Use vtrpc.toml defaults for hub target. Ensure compile with newHubCmd/newSpokeCmd/newSetupCmd already implemented. Include client TLS/token support when dialing TCP hubs (use config auth files).","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-22T05:34:15.097464184Z","created_by":"ubuntu","updated_at":"2026-01-22T06:32:52.052605412Z","closed_at":"2026-01-22T06:32:52.052516230Z","close_reason":"Completed","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"vtr-2hw","depends_on_id":"vtr-27g","type":"blocks","created_at":"2026-01-26T17:41:07Z","created_by":"import"},{"issue_id":"vtr-2hw","depends_on_id":"vtr-2ox","type":"blocks","created_at":"2026-01-26T17:41:07Z","created_by":"import"},{"issue_id":"vtr-2hw","depends_on_id":"vtr-hlj","type":"blocks","created_at":"2026-01-26T17:41:07Z","created_by":"import"},{"issue_id":"vtr-2hw","depends_on_id":"vtr-mvg","type":"blocks","created_at":"2026-01-26T17:41:07Z","created_by":"import"},{"issue_id":"vtr-2hw","depends_on_id":"vtr-tac","type":"blocks","created_at":"2026-01-26T17:41:07Z","created_by":"import"}]}
{"id":"vtr-2id","title":"Tailscale Serve integration for hub (private listener, no public TLS)","description":"Investigate and implement first-class Tailscale Serve support: hub should bind a private listener that Tailscale Serve proxies to (no public exposure on :0). Determine Serve support for raw TCP and how to expose gRPC/HTTP (h2) correctly. If Serve terminates TLS, document/remove local TLS cert requirements when enabled. Decide config flags and security posture. Ship end-to-end: Tailscale Serve config, hub listener changes, and docs.","notes":"Proposal: add single-port mode to vtr hub that multiplexes gRPC + Web UI/WS on one HTTP/2 listener. Implement gRPC/HTTP router (application/grpc -> grpc.Server, else web handler). Use h2c for plaintext when TLS is terminated by Tailscale Serve. Run on loopback and expose via tailscale serve --tls-terminated-tcp to avoid custom certs. Keep legacy separate ports as default.","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-23T00:28:07.554368029Z","created_by":"ubuntu","updated_at":"2026-01-27T22:03:29.413518703Z","compaction_level":0,"original_size":0}
{"id":"vtr-2j37","title":"Logging consistency (replace log.Printf with slog)","description":"From docs/architecture-review.md: unify logging style.\n\nPlan:\n- Replace `log.Printf` usage in `server/grpc.go` and `cmd/vtr/web_cmd.go` with `slog` calls.\n- Reuse existing slog logger configured in hub/spoke; if needed, pass a logger into the gRPC/web handlers (minimal surface area change).\n- Keep log messages semantically equivalent.\n\nDeliverables:\n- No functional changes beyond logging.\n- Consistent slog usage in server + web paths.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-02-05T21:57:04.860483277Z","created_by":"ubuntu","updated_at":"2026-02-06T00:01:14.848751826Z","closed_at":"2026-02-06T00:01:14.848629750Z","close_reason":"Completed","compaction_level":0,"original_size":0,"labels":["cleanup"]}
{"id":"vtr-2j8","title":"Web source + build pipeline to web/dist","description":"Add in-repo web source + build tooling and ensure web/dist is generated for vtr web.\n\nScope:\n- React + Bun + Vite setup in web/.\n- Build pipeline outputs web/dist for static serving.\n- Document build/run steps.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-20T20:34:55.594211528Z","created_by":"ubuntu","updated_at":"2026-01-20T21:26:29.028245544Z","closed_at":"2026-01-20T21:26:29.028190708Z","close_reason":"Completed","compaction_level":0,"original_size":0,"labels":["area:build","area:web","milestone:M7_1"],"dependencies":[{"issue_id":"vtr-2j8","depends_on_id":"vtr-6ia","type":"parent-child","created_at":"2026-01-26T17:41:07Z","created_by":"import"}]}
{"id":"vtr-2ke","title":"Web UI: Query/filter sessions in multi-view dashboard","description":"Context: As the multi-view dashboard grows, users need to target subsets of sessions (e.g., \"idle agents in foo\") for inspection and later actions.\nScope:\n- Add a query/filter bar to the multi-view dashboard.\n- Define an initial filter grammar or UI filters for coordinator + status (e.g., idle/busy/exited) with room to expand.\n- Filtering should update the visible thumbnails and the current selection set.\nAcceptance:\n- Query/filter input is available in multi-view mode.\n- Users can filter by coordinator name and at least one session status (idle/busy/exited).\n- Filtered results update the visible thumbnails and selection set without a reload.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-21T01:31:03.804839542Z","created_by":"ubuntu","updated_at":"2026-01-21T01:54:53.797134490Z","closed_at":"2026-01-21T01:54:53.797079273Z","close_reason":"Completed","compaction_level":0,"original_size":0,"labels":["area:web"],"dependencies":[{"issue_id":"vtr-2ke","depends_on_id":"vtr-3vl","type":"blocks","created_at":"2026-01-26T17:41:07Z","created_by":"import"},{"issue_id":"vtr-2ke","depends_on_id":"vtr-xob","type":"parent-child","created_at":"2026-01-26T17:41:07Z","created_by":"import"}]}
{"id":"vtr-2kn","title":"TUI: Add h/l tab navigation bindings","description":"Context: TUI attach currently uses j/k (and n/p) to move between sessions via leader key. Add vim-style h/l bindings for previous/next tab navigation to match terminal UX expectations.\n\nScope:\n- Add leader+h for previous tab/session and leader+l for next tab/session.\n- Keep existing bindings (j/k, n/p) unchanged.\n- Update any on-screen legend hints to include h/l where appropriate.\n\nAcceptance:\n- Ctrl+b then h switches to previous tab/session.\n- Ctrl+b then l switches to next tab/session.\n- Existing navigation bindings remain intact.\n- Legends/help reflect the new bindings without regressions.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-21T20:32:59.713915552Z","created_by":"ubuntu","updated_at":"2026-01-21T20:35:35.514597163Z","closed_at":"2026-01-21T20:35:35.514540985Z","close_reason":"Completed","compaction_level":0,"original_size":0,"labels":["area:tui"]}
{"id":"vtr-2kp","title":"Protocol: stream SessionsSnapshot with coordinator list (replace SubscribeSessions)","description":"Goal: make clients dumb by pushing coordinator membership + per-coordinator session lists from the hub. Replace SubscribeSessions (stream SubscribeSessionsEvent) with a snapshot stream that emits SessionsSnapshot (coordinators + sessions, including empty).\\n\\nDesign\\n- Proto change: replace/rename SubscribeSessions to return stream SessionsSnapshot (e.g. SubscribeSessionsSnapshot or rename existing). Remove SubscribeSessionsEvent message entirely.\\n- SessionsSnapshot already includes repeated CoordinatorSessions { name, path, sessions, error }, which is the canonical payload. Emit this on every change.\\n- Hub/federated server owns aggregation; when registry/tunnel changes or sessions change, it emits a fresh snapshot.\\n- Web server becomes a thin shim: it forwards SubscribeSessionsRequest to the hub gRPC stream and relays SessionsSnapshot frames as Any (no custom aggregation).\\n\\nImplementation map\\n- proto/vtr.proto: update RPC signature + messages; drop SubscribeSessionsEvent.\\n- server/grpc.go: update SubscribeSessions implementation to send SessionsSnapshot (local-only server).\\n- cmd/vtr/federation.go: update federated SubscribeSessions to emit SessionsSnapshot; ensure watchRegistry still adds new spokes and snapshot includes empty coordinators.\\n- cmd/vtr/tunnel.go: update tunnel stream handling for new method name/response type; remove SubscribeSessionsEvent handling.\\n- cmd/vtr/web_cmd.go: /api/ws/sessions should dial hub gRPC snapshot stream and forward snapshots (no sessionListState/watchCoordinatorSessions).\\n- web/src/lib/proto.ts + web/dist: regenerate web proto bindings to include updated RPC/message names.\\n- docs: docs/streaming.md, docs/web-ui.md, docs/protocols.md updated for new snapshot stream semantics.\\n- tests: update server/grpc_test.go and any federation tests that expect SubscribeSessionsEvent; add coverage for empty coordinator snapshot when spoke joins.\\n\\nAcceptance\\n- When a spoke registers (even with zero sessions), existing clients receive a snapshot containing that coordinator.\\n- A single stream delivers coordinator membership and per-coordinator session lists; clients only render latest snapshot.\\n- Web sessions endpoint is a thin bridge over gRPC snapshot stream (no parallel aggregation).","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-27T00:14:00.348297973Z","created_by":"ubuntu","updated_at":"2026-01-27T00:39:02.572762399Z","closed_at":"2026-01-27T00:39:02.572613771Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"vtr-2lh","title":"Web UI: Move terminal focus styling to shadow panel","description":"Context: The terminal surface :focus-visible outline is visually ugly; focus should be indicated on the surrounding shadow panel instead.\nScope:\n- Remove/override the terminal surface focus-visible outline.\n- Apply focus styling to the terminal container (shadow-panel) by changing its border color on focus.\n- Ensure focus indication remains accessible and consistent across keyboard/mouse focus.\nAcceptance:\n- Terminal surface no longer shows a default outline/border on focus.\n- Terminal container border changes color when the terminal is focused.\n- Focus styling works for keyboard and mouse focus.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-21T18:04:14.493290584Z","created_by":"ubuntu","updated_at":"2026-01-21T18:04:40.130705316Z","closed_at":"2026-01-21T18:04:40.130620151Z","close_reason":"Completed","compaction_level":0,"original_size":0,"labels":["area:web"],"dependencies":[{"issue_id":"vtr-2lh","depends_on_id":"vtr-xob","type":"parent-child","created_at":"2026-01-26T17:41:07Z","created_by":"import"}]}
{"id":"vtr-2nc","title":"Cleanup + docs/tests for ID-only SessionRef","description":"Goal: remove legacy helpers/fields and update docs/tests to the ID-only SessionRef model.\n\nWork:\n- Remove leftover prefix/parse helpers (parseSessionRef, prefixName/prefixID) and any name-based fallbacks.\n- Update docs to state: names are labels; all routing uses SessionRef id+coordinator.\n- Update tests (cmd/vtr/*_test.go, web/tests/*) to use id-based selection and coordinator fields.\n- Run go test ./... and web e2e.\n\nAcceptance:\n- No legacy prefix/parse helpers remain.\n- Docs and tests reflect the new contract.\n- Test suite passes.\n\nNotes:\n- Depends on federation + client updates.\n","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-27T22:02:28.227149836Z","created_by":"ubuntu","updated_at":"2026-02-02T17:08:25.982005769Z","closed_at":"2026-02-02T17:08:25.981944201Z","close_reason":"Completed","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"vtr-2nc","depends_on_id":"vtr-dll","type":"waits-for","created_at":"2026-01-27T22:02:28.229586556Z","created_by":"ubuntu"},{"issue_id":"vtr-2nc","depends_on_id":"vtr-v5o","type":"waits-for","created_at":"2026-01-27T22:02:28.230847843Z","created_by":"ubuntu"}]}
{"id":"vtr-2nf","title":"Federation: hub proxy for core RPCs (List/Info/Send/etc)","description":"Implement hub-side federation per docs/federation-hub-spoke.md: load spoke list from vtrpc.toml, dial spokes over gRPC (TLS+token), and proxy core RPCs (List, Info, GetScreen, Grep, SendText/Key/Bytes, Resize, WaitFor/Idle). Merge session lists and expose spoke:session naming. Keep streaming (Subscribe) out of scope for this bead. Requires hub/spoke commands + auth in place.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-22T05:34:46.325769184Z","created_by":"ubuntu","updated_at":"2026-01-26T19:54:40.906807768Z","closed_at":"2026-01-26T19:54:40.906751168Z","close_reason":"Implemented in code (federated server + tunnel proxying)","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"vtr-2nf","depends_on_id":"vtr-27g","type":"blocks","created_at":"2026-01-26T17:41:07Z","created_by":"import"},{"issue_id":"vtr-2nf","depends_on_id":"vtr-hlj","type":"blocks","created_at":"2026-01-26T17:41:07Z","created_by":"import"},{"issue_id":"vtr-2nf","depends_on_id":"vtr-mvg","type":"blocks","created_at":"2026-01-26T17:41:07Z","created_by":"import"}]}
{"id":"vtr-2ox","title":"Server: gRPC TCP listener + TLS/token auth","description":"Add server-side support for gRPC over TCP with TLS + token auth. Files: server/grpc.go (or new server/listen.go, server/auth.go). Implement ServeTCP(ctx, coord, addr, tlsConfig, token) in addition to existing ServeUnix. Add unary/stream interceptors to enforce token when configured (Authorization: Bearer <token>). Require TLS when listening on non-loopback TCP. Local Unix sockets continue to use filesystem permissions only. Keep behavior aligned with docs/spec.md Authentication section. Avoid touching CLI files in this bead.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-22T05:33:32.984348148Z","created_by":"ubuntu","updated_at":"2026-01-22T05:55:26.682032095Z","closed_at":"2026-01-22T05:55:26.681973252Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"vtr-2pe","title":"Web UI: Investigate and propose comprehensive menu system","description":"Context: Web UI lacks a comprehensive menu system for session actions and sending special control sequences/signals that may be blocked by the browser.\nScope:\n- Review current web app structure and interaction flows for session actions.\n- Investigate options for exposing advanced actions (create/kill, send control sequences like Ctrl-C/Ctrl-B, send signals like SIGKILL/SIGTERM).\n- Propose a menu system UX and information architecture suitable for web constraints.\n- Document findings and a recommended approach for human review.\nAcceptance:\n- A written proposal exists describing the menu system, placement, and interaction model.\n- Proposal includes handling for control-sequence actions and signal sending, with browser limitations noted.\n- Recommendations align with current app structure and are feasible to implement.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-20T23:19:21.718931838Z","created_by":"ubuntu","updated_at":"2026-01-21T01:40:03.205868800Z","closed_at":"2026-01-21T01:40:03.205815186Z","close_reason":"Completed","compaction_level":0,"original_size":0,"labels":["area:web"],"dependencies":[{"issue_id":"vtr-2pe","depends_on_id":"vtr-xob","type":"parent-child","created_at":"2026-01-26T17:41:07Z","created_by":"import"}]}
{"id":"vtr-2ps","title":"Web UI: Group tabs by coordinator and remove tab close button","description":"Context: The tab bar should present sessions grouped by coordinator without repeating coordinator names inside each tab, and tabs should rely on alternate close interactions.\nScope:\n- Group session tabs by coordinator in the tab bar.\n- Do not show coordinator name inside individual tabs.\n- Remove any explicit close button from tabs.\n- Preserve alternate close mechanisms (e.g., middle-click/context menu) if already planned.\nAcceptance:\n- Tabs are visually grouped by coordinator in the tab bar.\n- Tab labels omit coordinator prefixes.\n- Tabs have no explicit close button.\n- Tab interactions remain functional and discoverable.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-21T20:26:22.678143919Z","created_by":"ubuntu","updated_at":"2026-01-21T20:35:36.947847491Z","closed_at":"2026-01-21T20:35:36.947778728Z","close_reason":"Completed","compaction_level":0,"original_size":0,"labels":["area:web"],"dependencies":[{"issue_id":"vtr-2ps","depends_on_id":"vtr-xob","type":"parent-child","created_at":"2026-01-26T17:41:07Z","created_by":"import"}]}
{"id":"vtr-2qc","title":"Evaluate ncurses/crush rendering + add FPS profiler","description":"Research ncurses + charmbracelet/crush rendering strategies (minimal diff/optimized repaint, target <5ms). Capture notes + actionable ideas for vtr. Implement render profiler: compute render FPS, display in bottom status bar, and expose a harness/test query API for FPS.","status":"in_progress","priority":3,"issue_type":"task","created_at":"2026-01-26T22:57:56.862606173Z","created_by":"ubuntu","updated_at":"2026-02-02T19:08:28.604327091Z","compaction_level":0,"original_size":0}
{"id":"vtr-2rv","title":"Web UI: Disable terminal text selection","description":"Context: Web terminal text can be selected, which interferes with input focus and feels unlike a terminal.\nScope:\n- Disable text selection for the terminal render area in the web UI.\n- Ensure clicking the terminal focuses it without selecting text.\n- Preserve selection behavior for non-terminal UI elements (menus, input fields).\nAcceptance:\n- Dragging/clicking inside the terminal does not highlight text.\n- Click focuses the terminal for keyboard input.\n- Other UI areas remain selectable where appropriate.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-20T22:49:17.485348782Z","created_by":"ubuntu","updated_at":"2026-01-20T22:53:01.968910750Z","closed_at":"2026-01-20T22:53:01.968854632Z","close_reason":"Completed","compaction_level":0,"original_size":0,"labels":["area:web"],"dependencies":[{"issue_id":"vtr-2rv","depends_on_id":"vtr-xob","type":"parent-child","created_at":"2026-01-26T17:41:07Z","created_by":"import"}]}
{"id":"vtr-2sea","title":"Patch 4: Use cached keyframe on subscribe when valid","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-02-11T01:05:43.623363949Z","created_by":"ubuntu","updated_at":"2026-02-11T01:11:47.036342954Z","closed_at":"2026-02-11T01:11:47.036285552Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"vtr-2td","title":"Memory safety docs","description":"Document CGO ownership patterns and safe usage.\n\nScope:\n- Snapshot/dump allocation/free rules.\n- Terminal lifetime ownership.\n- cgocheck guidance and known limitations.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-20T20:34:56.261508390Z","created_by":"ubuntu","updated_at":"2026-01-20T22:12:42.104790622Z","closed_at":"2026-01-20T22:12:42.104660631Z","close_reason":"Completed","compaction_level":0,"original_size":0,"labels":["area:docs","milestone:M9"],"dependencies":[{"issue_id":"vtr-2td","depends_on_id":"vtr-uoj","type":"parent-child","created_at":"2026-01-26T17:41:07Z","created_by":"import"}]}
{"id":"vtr-2to","title":"Linux host macOS cross-builds for vtr artifacts","description":"Figure out how to produce macOS artifacts from the Linux build server. Evaluate osxcross vs Zig SDK-based cross-linking (Apple SDK requirements, licensing), set up toolchain detection, and update build-multi/CI to emit darwin/amd64 + darwin/arm64 from Linux. Document required SDK setup and environment variables. Related to vtr-y5c (multi-platform build outputs) and vtr-1w3 (Homebrew bottles).","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-23T18:48:49.099698742Z","created_by":"ubuntu","updated_at":"2026-01-27T22:03:29.125179417Z","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"vtr-2to","depends_on_id":"vtr-y5c","type":"blocks","created_at":"2026-01-26T17:41:06Z","created_by":"import"}]}
{"id":"vtr-2wy","title":"TUI: Clickable session tabs with middle-click kill","description":"Context: With mouse support, the TUI tab bar should be clickable for session switching and management.\nScope:\n- Enable clicking a session tab to switch to that session.\n- Support middle-click on a tab to kill the corresponding session (with existing confirmation if any).\n- Keep keyboard navigation intact.\nAcceptance:\n- Left-clicking a tab activates that session.\n- Middle-clicking a tab kills that session.\n- No regressions to keyboard-driven tab/session navigation.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-21T02:11:24.953085843Z","created_by":"ubuntu","updated_at":"2026-01-26T23:09:22.933549392Z","closed_at":"2026-01-26T23:09:22.933441193Z","close_reason":"Completed","compaction_level":0,"original_size":0,"labels":["area:tui"],"dependencies":[{"issue_id":"vtr-2wy","depends_on_id":"vtr-12j","type":"blocks","created_at":"2026-01-26T17:41:07Z","created_by":"import"},{"issue_id":"vtr-2wy","depends_on_id":"vtr-4vi","type":"parent-child","created_at":"2026-01-26T17:41:07Z","created_by":"import"}]}
{"id":"vtr-2xx","title":"TUI: Add tab bar header with session names and coordinator label","description":"Context: The TUI needs a tab-style header for session navigation with a clean top bar.\nScope:\n- Add a top tab bar that lists each session name as a tab.\n- Display session names without the coordinator prefix.\n- Reserve the top bar for tabs only (no coordinator label).\n- Show the coordinator name in the bottom-left corner of the status bar instead.\n- Highlight the active session tab and keep existing navigation behavior.\nAcceptance:\n- Top header shows only tabs for each session with names stripped of coordinator prefix.\n- Active session is visually indicated in the tab bar.\n- Coordinator name appears in the bottom-left status area.\n- No regressions to session switching or layout.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-21T02:03:52.248605550Z","created_by":"ubuntu","updated_at":"2026-01-21T02:54:28.839758888Z","closed_at":"2026-01-21T02:54:28.839695795Z","close_reason":"Completed","compaction_level":0,"original_size":0,"labels":["area:tui"],"dependencies":[{"issue_id":"vtr-2xx","depends_on_id":"vtr-3jv","type":"parent-child","created_at":"2026-01-26T17:41:07Z","created_by":"import"}]}
{"id":"vtr-2yd","title":"Config: disable hub session spawning","description":"Add configuration to disable session spawning in the hub coordinator. When enabled, the hub should refuse/redirect session spawn requests so sessions can only be created on spokes. Document behavior and defaults.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-26T19:28:54.451643770Z","created_by":"ubuntu","updated_at":"2026-01-27T19:04:06.636419785Z","closed_at":"2026-01-27T19:04:06.636355280Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"vtr-2ypz","title":"Patch 5: Tunnel stream cancel/end-call correctness on drop/onEvent error","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-02-11T01:05:43.791194919Z","created_by":"ubuntu","updated_at":"2026-02-11T01:12:55.612096306Z","closed_at":"2026-02-11T01:12:55.611997334Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"vtr-2yzh","title":"Patch 6: gRPC subscribe teardown must not hang on blocked sender","status":"open","priority":2,"issue_type":"bug","created_at":"2026-02-11T01:05:43.948276693Z","created_by":"ubuntu","updated_at":"2026-02-11T01:05:43.948276693Z","compaction_level":0,"original_size":0}
{"id":"vtr-2zr","title":"Coordinator tree + search + attach flow","description":"Build coordinator tree view with search/filter and session attach UX.\n\nScope:\n- Expand/collapse coordinators with status chips.\n- Search matches coordinator/session names.\n- Attach flow with clear connect/reconnect states.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-20T20:34:55.672916938Z","created_by":"ubuntu","updated_at":"2026-01-20T20:48:01.905204223Z","closed_at":"2026-01-20T20:48:01.905147794Z","close_reason":"Built coordinator tree with filter and attach flow.","compaction_level":0,"original_size":0,"labels":["area:web","milestone:M7_1"],"dependencies":[{"issue_id":"vtr-2zr","depends_on_id":"vtr-6ia","type":"parent-child","created_at":"2026-01-26T17:41:07Z","created_by":"import"}]}
{"id":"vtr-2zu","title":"Web UI: Dev mode HMR via Vite when running vtr web","description":"Context: vtr web serves embedded web/dist assets only; local changes in web/ do not hot-reload.\nScope:\n- Add a dev-mode path for vtr web to proxy to, or launch, the Vite dev server (HMR) when running locally.\n- Keep production behavior serving embedded web/dist unchanged.\n- Document how to use dev mode and any required env flags.\nAcceptance:\n- Editing files under web/ triggers HMR in the browser during vtr web dev.\n- Production builds still serve embedded assets without Vite.\n- Clear developer workflow documented in docs/spec.md or docs/.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-20T22:06:13.938506274Z","created_by":"ubuntu","updated_at":"2026-01-20T22:20:50.843543985Z","closed_at":"2026-01-20T22:20:50.843490261Z","close_reason":"Completed","compaction_level":0,"original_size":0,"labels":["area:build","area:web"],"dependencies":[{"issue_id":"vtr-2zu","depends_on_id":"vtr-6ia","type":"parent-child","created_at":"2026-01-26T17:41:07Z","created_by":"import"}]}
{"id":"vtr-30z","title":"Support tab renaming in the terminal","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-26T17:20:02.027123765Z","created_by":"ubuntu","updated_at":"2026-01-30T03:43:31.200853644Z","closed_at":"2026-01-30T03:43:31.200763790Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"vtr-329","title":"Attach frame tracking + resync","description":"Update vtr attach to track frame_id and resync on desync.\n\nScope:\n- Apply keyframes, drop deltas when base_frame_id mismatches.\n- Resubscribe when desync detected.\n- Track latest frame_id for diagnostics.\n\nFiles: cmd/vtr/attach.go and related TUI rendering logic.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-20T20:34:55.241228835Z","created_by":"ubuntu","updated_at":"2026-01-20T22:12:22.597102971Z","closed_at":"2026-01-20T22:12:22.597034709Z","close_reason":"Completed","compaction_level":0,"original_size":0,"labels":["area:streaming","area:tui","milestone:M6_5"],"dependencies":[{"issue_id":"vtr-329","depends_on_id":"vtr-1kt","type":"parent-child","created_at":"2026-01-26T17:41:07Z","created_by":"import"}]}
{"id":"vtr-32c","title":"SendMouse RPC + server encoding","description":"Add SendMouse RPC and encode xterm mouse sequences server-side.\n\nScope:\n- Proto additions: SendMouse, MouseModeChanged enums.\n- Enforce FAILED_PRECONDITION when mode == NONE.\n- Encode SGR by default; handle modifiers and wheel.","status":"blocked","priority":2,"issue_type":"task","created_at":"2026-01-20T20:34:56.014712502Z","created_by":"ubuntu","updated_at":"2026-01-20T22:15:00.438875237Z","compaction_level":0,"original_size":0,"labels":["area:proto","area:server","milestone:M8"],"dependencies":[{"issue_id":"vtr-32c","depends_on_id":"vtr-1r7","type":"blocks","created_at":"2026-01-26T17:41:07Z","created_by":"import"},{"issue_id":"vtr-32c","depends_on_id":"vtr-4vi","type":"parent-child","created_at":"2026-01-26T17:41:07Z","created_by":"import"}]}
{"id":"vtr-334","title":"Web UI: stacked coordinator rows in session tabs","description":"Goal\n- In the single-session web view, show sessions grouped into stacked coordinator rows (no intermixing). Each coordinator has its own visually isolated tab strip. It must be unambiguous which coordinator a session belongs to.\n\nWhere to change\n- `web/src/App.tsx` (single-view layout, `SessionTabs` usage, create session flow)\n- `web/src/components/SessionTabs.tsx` (tab rendering)\n- Optional: create a new component if cleaner (e.g. `CoordinatorTabRows.tsx`), but keep `MultiViewDashboard` unchanged.\n\nCurrent behavior\n- `SessionTabs` takes a flat array of tabs and renders a single horizontal strip. It only inserts a small coordinator label at group boundaries; sessions can still appear interleaved in one row.\n\nRequired behavior\n1) Stack rows by coordinator\n- Render one row per coordinator (in the order provided by `visibleCoordinators` in `App.tsx`).\n- Each row has a coordinator header/label and its own tab strip. Tabs in a row must ONLY be sessions from that coordinator.\n- Rows should be visually separated (card-like block or top/bottom padding + border) so coordinators are clearly isolated.\n\n2) Coordinator header\n- Include the coordinator name (uppercase small label is fine) and a count of sessions.\n- The coordinator header should be clearly distinct from the tabs (e.g. left-aligned label + optional count on the right).\n\n3) Create session\n- Add a per-row â€œnew sessionâ€ button OR make the existing button contextual to the row.\n- Update `handleCreateSession` to accept an optional coordinator name, and default to the active sessionâ€™s coordinator only if none is provided.\n- The rowâ€™s create button should pass its coordinator name so new sessions are created on that coordinator.\n\n4) Keep existing interactions\n- Active tab highlight still works.\n- Middle-click close, context menu, long-press, keyboard selection still work.\n- Titles and tooltips remain `coord:session`.\n\nImplementation notes\n- You can either:\n  A) Change `SessionTabs` to accept grouped input (e.g. `groups: { coordinator: string; tabs: SessionTab[] }[]`) and render stacked rows.\n  B) Create a new component that takes `coordinators: CoordinatorInfo[]` and builds grouped rows from that.\n- In `App.tsx`, prefer using `visibleCoordinators` directly to avoid regrouping a flat list.\n- Keep `MultiViewDashboard` as-is; it already groups by coordinator.\n\nAcceptance criteria\n- With 2+ coordinators, the single view shows 2+ separate rows, each containing only that coordinatorâ€™s sessions.\n- Sessions are not interleaved across rows.\n- A row-level â€œnew sessionâ€ button creates a session on that coordinator.\n- Existing session actions (select, close, context menu) work identically.\n\nSuggested smoke test\n- Start hub with 2 coordinators (e.g. local + tunnel spoke).\n- Open web UI single view and verify each coordinator renders its own row.\n- Click new session in the spokeâ€™s row; ensure session appears under that coordinator and is selectable.","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-26T20:37:10.491014012Z","created_by":"ubuntu","updated_at":"2026-01-26T20:38:58.655839253Z","compaction_level":0,"original_size":0}
{"id":"vtr-336","title":"Web UI: Remove manual session attach text box","description":"Context: The sidebar includes a manual \"Attach to a session\" input in web/src/App.tsx.\nScope:\n- Remove the manual text input + Attach button.\n- Rely on the coordinator tree for session selection.\nAcceptance:\n- No manual attach input is shown in the sidebar.\n- Session selection remains available via the coordinator tree.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-20T22:05:49.282134519Z","created_by":"ubuntu","updated_at":"2026-01-20T22:41:43.744079546Z","closed_at":"2026-01-20T22:41:43.744024450Z","close_reason":"Completed","compaction_level":0,"original_size":0,"labels":["area:web"],"dependencies":[{"issue_id":"vtr-336","depends_on_id":"vtr-xob","type":"parent-child","created_at":"2026-01-26T17:41:07Z","created_by":"import"}]}
{"id":"vtr-33c","title":"Web UI: Hide closed sessions by default with menu toggle","description":"Context: Closed sessions clutter the web UI; we want them hidden by default with an explicit way to reveal them when needed.\nScope:\n- Hide closed/exited sessions in the web UI by default.\n- Add a menu-based toggle to show all sessions (including closed) on demand.\n- Keep coordinator grouping intact when closed sessions are shown.\n- Decide whether the toggle state should persist across reloads.\nAcceptance:\n- Default view excludes closed sessions.\n- Users can reveal closed sessions via a clearly discoverable menu control.\n- Toggling does not break selection/attach and preserves grouping.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-21T02:12:35.985907152Z","created_by":"ubuntu","updated_at":"2026-01-21T02:35:41.105238576Z","closed_at":"2026-01-21T02:35:41.105182859Z","close_reason":"Completed","compaction_level":0,"original_size":0,"labels":["area:web"],"dependencies":[{"issue_id":"vtr-33c","depends_on_id":"vtr-xob","type":"parent-child","created_at":"2026-01-26T17:41:07Z","created_by":"import"}]}
{"id":"vtr-33r","title":"TUI: allow start with no sessions; add per-coordinator +","description":"When there are zero sessions across coordinators, TUI should still let user create a session. Likely needs a per-coordinator '+' action in the empty/coord list UI, similar to web.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-26T23:53:35.015844663Z","created_by":"ubuntu","updated_at":"2026-01-27T00:09:46.123159307Z","closed_at":"2026-01-27T00:09:46.123070314Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"vtr-36x","title":"Web UI: Fix foreground text rendering as black","description":"Context: Web terminal renders some foreground text (e.g. htop) as black even when the TUI shows it as white.\nScope:\n- Identify and fix the foreground color mapping/contrast handling in the web terminal renderer.\n- Ensure ANSI/default foreground colors map to the correct visible colors.\n- Validate with htop and at least one other TUI.\nAcceptance:\n- htop foreground text that appears white in the TUI renders white in the web UI.\n- Default/ANSI foreground colors render consistently with the terminal theme.\n- No regressions in other color mappings.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-20T22:51:58.594388870Z","created_by":"ubuntu","updated_at":"2026-01-20T22:56:06.943614270Z","closed_at":"2026-01-20T22:56:06.943551449Z","close_reason":"Completed","compaction_level":0,"original_size":0,"labels":["area:web"],"dependencies":[{"issue_id":"vtr-36x","depends_on_id":"vtr-xob","type":"parent-child","created_at":"2026-01-26T17:41:07Z","created_by":"import"}]}
{"id":"vtr-39uz","title":"Add hub/spoke data flow diagram","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-30T00:42:37.705613442Z","created_by":"ubuntu","updated_at":"2026-01-30T00:43:16.566898636Z","closed_at":"2026-01-30T00:43:16.566842789Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"vtr-3an","title":"TUI: consume SessionsSnapshot stream for coordinator list","description":"Update TUI/CLI subscription logic to use the new SessionsSnapshot stream (coordinator list + sessions).\\n\\nLikely touchpoints\\n- cmd/vtr/attach.go: any logic that subscribes to session lists (search for SubscribeSessions / SubscribeSessionsEvent). Replace with snapshot stream, update parsing to read CoordinatorSessions + sessions (including empty).\\n- cmd/vtr/tunnel.go (if TUI uses tunnel path directly) should already be updated by parent; ensure TUI path compiles against new proto.\\n- Update any helpers that assumed a flat session list to handle coordinator membership (keep behavior but use snapshot state).\\n\\nAcceptance\\n- TUI launches even with zero sessions and still shows coordinators from snapshot.\\n- No client-side \"subscribe to new coordinator\" logic; just render the latest snapshot.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-27T00:14:27.986529239Z","created_by":"ubuntu","updated_at":"2026-01-27T01:17:31.411364785Z","closed_at":"2026-01-27T01:17:31.411286364Z","close_reason":"Completed","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"vtr-3an","depends_on_id":"vtr-2kp","type":"parent-child","created_at":"2026-01-27T00:14:27.989041023Z","created_by":"ubuntu"}]}
{"id":"vtr-3be","title":"TUI: grouped session list with coordinator chips","description":"Goal\n- In the TUI session selector, show sessions grouped under coordinator headers (tree-like list), and show coordinator chips in the tab bar so coordinator identity is always visible.\n\nWhere to change\n- `cmd/vtr/attach.go` (session list model, tab rendering, list item types)\n\nCurrent behavior\n- Session list is flat (`sessionListItem` only). Tabs strip coordinator prefixes via `stripCoordinatorPrefix`, so coordinator identity is hidden.\n\nRequired behavior\n1) Grouped session list (tree-like)\n- Render coordinator headers in the list, with sessions indented beneath them.\n- Coordinator headers should be visually distinct and non-selectable (skip on up/down, enter should not attach).\n- The grouping key is the coordinator prefix in session names (e.g. `spoke-a:build` => coordinator `spoke-a`).\n- If no prefix exists, treat it as the active coordinator (current hub/local) and group under that name.\n- Filtering should still work; `FilterValue` for sessions should include both `coord` and `session` (e.g. `spoke-a:build build`).\n- Exited filtering (`showExited`) should apply only to sessions, not headers.\n\n2) Coordinator chips in the tab bar\n- For each tab, render a small chip/pill with the coordinator name before the session label.\n- Do NOT strip the coordinator in tabs anymore; instead parse it and display the chip + the stripped session label.\n- If no prefix exists, use `m.coordinator.Name` as the chip label.\n\nImplementation notes\n- Add a new list item type for headers, e.g.:\n  - `type sessionListHeader struct { name string; count int }`\n  - Implement `Title/Description/FilterValue` but keep it non-selectable via delegate or Update logic.\n- Use a custom `list.ItemDelegate` to render headers differently and avoid selection, or in Update, detect header selection and move to next/prev session item.\n- Extend `sessionListItem` to include `coord string`.\n- When building session lists (e.g. in `loadSessionListCmd`, `nextSessionCmd`, and any list refresh path), group sessions by coordinator and flatten into `[header, session, session, header, ...]` list items.\n- Keep existing sorting rules within each coordinator (`order` then name). Sort coordinators alphabetically for deterministic order.\n- Update `renderTabLabel` (and possibly `stripCoordinatorPrefix`) to use a new `splitCoordinatorPrefix` helper that returns `(coord, label)`.\n- Add a new style for the coordinator chip in tabs (e.g. small rounded label with muted background).\n\nAcceptance criteria\n- Session list shows headers per coordinator, sessions visually indented beneath.\n- Up/down navigation skips headers; enter/selection only works on sessions.\n- Tabs always show coordinator chips, even when session labels are short.\n- When connected to hub aggregating multiple spokes, sessions are clearly grouped by spoke name.\n\nSuggested smoke test\n- Run hub with local + spoke (tunnel). Open TUI, toggle session list, verify headers.\n- Use filter with `spoke-a` and ensure only that coordinatorâ€™s sessions remain (header still present if any session remains).\n- Switch tabs and confirm chip shows correct coordinator.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-26T20:37:18.959351778Z","created_by":"ubuntu","updated_at":"2026-01-26T21:16:27.269752349Z","closed_at":"2026-01-26T21:16:27.269658417Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"vtr-3bh","title":"Hub-only mode (no local coordinator)","description":"Allow hub to run without local coordinator; hub acts as aggregator/proxy only. Should disable local session spawning and remove local sessions from lists when enabled.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-27T18:22:42.389342367Z","created_by":"ubuntu","updated_at":"2026-01-27T18:34:25.734933362Z","closed_at":"2026-01-27T18:34:25.734873667Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"vtr-3c3","title":"Coordinator tree + attach flow","description":"Implement coordinator discovery + tree view + attach flow.\n\nScope:\n- Read ~/.config/vtr/config.toml and resolve coordinators.\n- Show status chips, search/filter, and attach action.\n- Handle session exit + reconnect states.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-20T20:34:55.384888784Z","created_by":"ubuntu","updated_at":"2026-01-20T21:20:51.897024453Z","closed_at":"2026-01-20T21:20:51.896928098Z","close_reason":"Completed","compaction_level":0,"original_size":0,"labels":["area:web","milestone:M7"],"dependencies":[{"issue_id":"vtr-3c3","depends_on_id":"vtr-xob","type":"parent-child","created_at":"2026-01-26T17:41:07Z","created_by":"import"}]}
{"id":"vtr-3c9","title":"Web UI: Fully disable terminal text selection","description":"Context: The web terminal still allows text selection, which interferes with focus and terminal-like behavior.\nScope:\n- Ensure text selection is fully disabled within the terminal render area.\n- Prevent selection via drag, double-click, or long-press.\n- Preserve selection behavior outside the terminal UI.\nAcceptance:\n- No text selection is possible inside the terminal view.\n- Clicking/dragging inside the terminal does not highlight text.\n- Other UI elements remain selectable as appropriate.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-20T23:11:56.492370547Z","created_by":"ubuntu","updated_at":"2026-01-20T23:15:52.805590333Z","closed_at":"2026-01-20T23:15:52.805535688Z","close_reason":"Completed","compaction_level":0,"original_size":0,"labels":["area:web"],"dependencies":[{"issue_id":"vtr-3c9","depends_on_id":"vtr-xob","type":"parent-child","created_at":"2026-01-26T17:41:07Z","created_by":"import"}]}
{"id":"vtr-3d7","title":"Web UI: Move theme selector into settings menu","description":"Context: Theme selection is currently exposed directly in the UI; we need a dedicated settings menu that can grow to house more app settings over time.\nScope:\n- Create a settings menu container in the web UI.\n- Move the theme selector into the settings menu.\n- Ensure the settings menu is discoverable and fits the existing layout patterns.\nAcceptance:\n- Theme selector is accessible via a settings menu (not directly on the main UI surface).\n- Settings menu can accommodate additional settings later (structure in place).\n- No regressions to theme switching behavior.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-21T01:28:23.302793825Z","created_by":"ubuntu","updated_at":"2026-01-21T01:37:38.673322454Z","closed_at":"2026-01-21T01:37:38.673255644Z","close_reason":"Completed","compaction_level":0,"original_size":0,"labels":["area:web"],"dependencies":[{"issue_id":"vtr-3d7","depends_on_id":"vtr-xob","type":"parent-child","created_at":"2026-01-26T17:41:07Z","created_by":"import"}]}
{"id":"vtr-3eh","title":"Add tunnel-based hubâ†”spoke routing (no spoke listeners)","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-26T19:20:58.378978999Z","created_by":"ubuntu","updated_at":"2026-01-26T19:30:28.552339136Z","closed_at":"2026-01-26T19:30:28.552271656Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"vtr-3f5r","title":"Update vtr agent spawn --help to document coordinator:session name","description":"Document that vtr agent spawn --name accepts coordinator:session (e.g., vtr:my-session) to route spawns to a specific spoke coordinator; currently works but undocumented.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-28T18:29:07.735835490Z","created_by":"ubuntu","updated_at":"2026-02-02T18:56:35.293135043Z","closed_at":"2026-02-02T18:56:35.293078312Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"vtr-3fql","title":"Patch 1: TUI resubscribe/session-id and delta frame monotonicity fixes","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-02-11T01:05:43.191060721Z","created_by":"ubuntu","updated_at":"2026-02-11T01:06:52.873729871Z","closed_at":"2026-02-11T01:06:52.873626491Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"vtr-3gm","title":"TUI: Status header shows coordinator/session + version","description":"Update TUI status border/header to show <coordinator>:<session> in top-left and vtr <version> (git hash in dev ok) in top-right; remove time display.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-20T22:20:40.861783505Z","created_by":"ubuntu","updated_at":"2026-01-20T22:28:22.494729118Z","closed_at":"2026-01-20T22:28:22.494653771Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"vtr-3hn","title":"Web UI: Remove tab bar ellipsis menu (right-click only)","description":"Context: The tab context menu should be accessed via right-click only; the triple-dots button is redundant.\nScope:\n- Remove the triple-dots menu button from the web UI tab bar.\n- Ensure right-click opens the tab context menu reliably.\n- Provide an alternate affordance for touch devices if needed (e.g., long-press).\nAcceptance:\n- Tab bar no longer shows a triple-dots menu button.\n- Right-clicking a tab opens the context menu.\n- Touch/mobile interaction still provides a way to access tab actions.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-21T21:58:23.879960185Z","created_by":"ubuntu","updated_at":"2026-01-21T22:09:50.051665085Z","closed_at":"2026-01-21T22:09:50.051606773Z","close_reason":"Completed","compaction_level":0,"original_size":0,"labels":["area:web"],"dependencies":[{"issue_id":"vtr-3hn","depends_on_id":"vtr-xob","type":"parent-child","created_at":"2026-01-26T17:41:07Z","created_by":"import"}]}
{"id":"vtr-3hw","title":"Web UI: Persist selected session in URL hash for reload attach","description":"Context: Web UI session selection resets on reload; users want reloads to reattach the last selected session.\nScope:\n- Encode the selected session name into the URL hash (e.g. #session=<name>, URL-encoded).\n- On app load, if a hash session is present, auto-select and attempt to attach that session.\n- When selection changes, update the hash without a full reload.\n- If the hash points to a missing session, fall back to the session list and clear/ignore the hash.\nAcceptance:\n- Selecting a session updates the URL hash with the session name.\n- Reloading the page auto-connects to the session specified in the hash.\n- Invalid/missing session in the hash does not crash the UI and results in normal selection flow.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-20T22:46:38.559604047Z","created_by":"ubuntu","updated_at":"2026-01-20T22:56:08.468825185Z","closed_at":"2026-01-20T22:56:08.468765680Z","close_reason":"Completed","compaction_level":0,"original_size":0,"labels":["area:web"],"dependencies":[{"issue_id":"vtr-3hw","depends_on_id":"vtr-xob","type":"parent-child","created_at":"2026-01-26T17:41:07Z","created_by":"import"}]}
{"id":"vtr-3i0","title":"Web UI renders box-drawing horizontal lines too thin","description":"In the web UI terminal, the U+2500 BOX DRAWINGS LIGHT HORIZONTAL (e.g., used in header boxes) renders noticeably thinner than adjacent box corners/verticals. This makes the top/bottom borders look broken or too skinny. Repro: open a session in the web UI and view any box-drawing UI (e.g., Codex welcome box). Expected: horizontal strokes visually match vertical/corner stroke weight.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-22T02:17:18.665933773Z","created_by":"ubuntu","updated_at":"2026-01-22T05:56:57.741796039Z","closed_at":"2026-01-22T05:56:57.741699122Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"vtr-3i5","title":"Web UI: Align terminal viewport horizontal spacing with top nav","description":"Context: In the web UI, the top nav bar horizontal margins look consistent, but the main terminal rendering area has a noticeably larger right-side horizontal space. The effect may come from padding, margins, flex/gap, or other layout constraints (not necessarily CSS margin).\n\nScope:\n- Inspect the nav and terminal layout containers to identify the source of the extra right-side space.\n- Align the terminal viewport's left/right spacing with the top nav's horizontal margins.\n- Preserve responsive behavior and terminal sizing.\n\nAcceptance:\n- Terminal view right margin visually matches the top nav bar margin.\n- No horizontal overflow, clipping, or layout regression across common viewport sizes.\n- Input focus and terminal rendering remain intact.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-22T01:48:04.742726816Z","created_by":"ubuntu","updated_at":"2026-01-22T02:01:25.173761926Z","closed_at":"2026-01-22T02:01:25.173660940Z","close_reason":"Completed","compaction_level":0,"original_size":0,"labels":["area:web"]}
{"id":"vtr-3iy","title":"Web UI: Move coordinator filter to bottom of left panel","description":"Context: The coordinator filter input placement should be anchored at the bottom of the left panel for consistency and discoverability.\nScope:\n- Move the coordinator filter text box to the bottom of the left-hand panel.\n- Keep filtering behavior unchanged.\n- Ensure the layout remains usable on desktop and mobile.\nAcceptance:\n- Coordinator filter input appears at the bottom of the left panel.\n- Filtering still affects the coordinator/session list as before.\n- No layout regressions on common viewport sizes.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-20T23:00:46.810977661Z","created_by":"ubuntu","updated_at":"2026-01-20T23:02:23.714950672Z","closed_at":"2026-01-20T23:02:23.714895846Z","close_reason":"Completed","compaction_level":0,"original_size":0,"labels":["area:web"],"dependencies":[{"issue_id":"vtr-3iy","depends_on_id":"vtr-xob","type":"parent-child","created_at":"2026-01-26T17:41:07Z","created_by":"import"}]}
{"id":"vtr-3jv","title":"M6 - Attach TUI (Bubbletea)","description":"Goal: Deliver a tmux-like attach experience for basic workflows with modern UX.\n\nDeliverables:\n- Subscribe RPC with streaming events and backpressure handling\n- Streaming proto: SubscribeRequest/ScreenUpdate/SessionExited/SubscribeEvent\n- vtr attach Bubbletea TUI with border + status bar + raw mode\n- Leader-based session management (create/detach/kill/next/prev/list)\n- Tests for subscribe stream behavior\n\nSuccess criteria:\n- vtr attach renders live output with Subscribe updates\n- Leader commands do not leak input into session\n- Detach keeps session running; kill ends it cleanly\n- Resizes update PTY size correctly\n\nHistorical: completed 2026-01-18; migrated from docs/progress.md.","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-20T20:33:13.319810396Z","created_by":"ubuntu","updated_at":"2026-01-20T20:34:54.941785693Z","closed_at":"2026-01-20T20:34:54.941732009Z","close_reason":"historical","compaction_level":0,"original_size":0,"labels":["area:tui","milestone:M6"]}
{"id":"vtr-3kad","title":"Hub/spoke TUI session switch causes tunnel call timeouts and empty session list","description":"Context: hub (no coordinator) + spoke + TUI client. When switching sessions in TUI, hub enters weird state. Hub logs show tunnel call timeouts (List/Resize/Subscribe), and Web UI \"View hub info\" shows zero coordinators/sessions.\n\nExample hub logs:\n- 2026-01-30T00:10:28.880Z INFO tunnel call success spoke=a11 method=List elapsed=518.491Âµs\n- 2026-01-30T00:10:32.771Z WARN tunnel call timeout spoke=vtr method=List elapsed=10.000196313s\n- 2026-01-30T00:10:35.138Z INFO tunnel call start spoke=vtr method=Resize\n- 2026-01-30T00:10:35.138Z INFO tunnel call start spoke=vtr method=Subscribe\n- 2026-01-30T00:10:37.898Z WARN tunnel call timeout spoke=vtr method=List elapsed=9.999889223s\n- 2026-01-30T00:10:45.138Z WARN tunnel call timeout spoke=vtr method=Resize elapsed=10.000492712s\n\nSpoke log (maybe not same timestamp):\n- 2026-01-30T00:25:47.813Z WARN spoke: tunnel stopped err=\"rpc error: code = Canceled desc = context canceled\"\n\nSymptoms: hub shows 0 coordinators/sessions, timeouts on tunnel calls, potential tunnel cancellation.\n\nAcceptance: switching sessions in TUI should not lead to tunnel call timeouts; hub session list remains populated; tunnel stays connected; no silent timeouts.","notes":"Work done:\n- Implemented non-blocking tunnel dispatch to prevent stream backpressure from stalling the tunnel reader.\n- Drops oldest queued frame when a call channel is full; terminal frames still end the call.\n- Added DEBUG logs for backlog behavior: \"tunnel call backlog drop\" and \"tunnel call enqueue failed\" with spoke/call_id/kind.\n- Built with `go build ./...` (Jan 30 2026).\n\nRemaining / follow-ups:\n- Reproduce hub(no coordinator)+spoke+TUI session switch with debug logs enabled to confirm drops correlate with timeouts.\n- Decide whether to keep drop-on-backlog vs. cancel the stream when backlog persists (could add thresholds/metrics).\n- Consider adding tests/metrics for tunnel backpressure and ensuring unary calls are not blocked by streaming backlog.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-30T00:33:51.396737770Z","created_by":"ubuntu","updated_at":"2026-01-30T03:25:33.999617112Z","closed_at":"2026-01-30T00:36:25.588869284Z","close_reason":"Implemented non-blocking tunnel dispatch to prevent streaming backpressure from stalling other calls","compaction_level":0,"original_size":0}
{"id":"vtr-3kc","title":"Web UI: Render terminal cursor (fake, TUI-matched)","description":"Context: Web terminal currently does not render a visible cursor; needs parity with the TUI cursor behavior (e.g., htop) without using the browser caret.\nScope:\n- Implement a fake cursor in the web terminal renderer matching the TUI style (block/underline/invert as appropriate).\n- Render cursor only when the session indicates cursor should be visible (respect hide/show).\n- Ensure cursor positioning updates with screen updates and handles htop-like UIs.\nAcceptance:\n- Cursor is visible in the web UI when the backend reports it should be shown.\n- Cursor is hidden when the backend indicates it is not visible.\n- Cursor appearance/position matches TUI expectations in apps like htop (no native browser caret).","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-20T23:04:47.368285105Z","created_by":"ubuntu","updated_at":"2026-01-20T23:09:51.060559451Z","closed_at":"2026-01-20T23:09:51.060504956Z","close_reason":"Completed","compaction_level":0,"original_size":0,"labels":["area:web"],"dependencies":[{"issue_id":"vtr-3kc","depends_on_id":"vtr-xob","type":"parent-child","created_at":"2026-01-26T17:41:07Z","created_by":"import"}]}
{"id":"vtr-3mn","title":"Web UI: Add Lucide icon set","description":"Context: The web UI lacks a consistent icon set; we want to standardize on Lucide for UI icons.\nScope:\n- Add Lucide icon dependency to the web app.\n- Replace existing ad-hoc icons with Lucide equivalents where applicable.\n- Document icon usage conventions (size, stroke, color) for consistency.\nAcceptance:\n- Lucide is installed and usable in the web UI.\n- Core UI icons are rendered via Lucide (no mixed icon sets).\n- Icon styling is consistent across the app.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-21T20:27:47.812586352Z","created_by":"ubuntu","updated_at":"2026-01-21T20:48:23.148935640Z","closed_at":"2026-01-21T20:48:23.148875073Z","close_reason":"Completed","compaction_level":0,"original_size":0,"labels":["area:web"],"dependencies":[{"issue_id":"vtr-3mn","depends_on_id":"vtr-xob","type":"parent-child","created_at":"2026-01-26T17:41:07Z","created_by":"import"}]}
{"id":"vtr-3ms","title":"Web UI: Avoid reconnect loop when attaching exited session","description":"Context: Selecting an exited session in the coordinator tree still attempts to open a WS stream; errors cause repeated reconnect attempts.\nScope:\n- Detect exited sessions on attach and prevent/short-circuit the WS subscribe.\n- Surface a clear UI state (exited) without retry loops.\n- Ensure reconnect logic only applies to live sessions.\nAcceptance:\n- Attaching to an exited session does not trigger endless reconnect/errors.\n- UI clearly indicates the session is exited and requires a new session to attach.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-20T22:05:45.619881098Z","created_by":"ubuntu","updated_at":"2026-01-20T22:44:32.823841250Z","closed_at":"2026-01-20T22:44:32.823763270Z","close_reason":"Completed","compaction_level":0,"original_size":0,"labels":["area:web"],"dependencies":[{"issue_id":"vtr-3ms","depends_on_id":"vtr-xob","type":"parent-child","created_at":"2026-01-26T17:41:07Z","created_by":"import"}]}
{"id":"vtr-3ov","title":"Web UI settings: dynamic hub/coordinator/session info panel","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-27T18:27:24.283816393Z","created_by":"ubuntu","updated_at":"2026-01-27T18:37:51.560746642Z","closed_at":"2026-01-27T18:37:51.560662941Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"vtr-3po","title":"Hub federation: aggregate spokes via registration or config","description":"Goal: Hub aggregates sessions from spokes for Web UI and CLI. Spokes can either register to hub (dynamic) or be defined in hub config (static socket/TCP).\n\nDesired behavior\n- Hub maintains a spoke registry from two sources:\n  1) Dynamic registration via RegisterSpoke (name + address + metadata).\n  2) Static config entries (e.g. [[federation.spokes]] name + address) for unix sockets or TCP.\n- Hub aggregates session lists across spokes and merges into a unified view (spoke:session).\n- Web UI session list and /api/sessions reflect aggregated hub+spoke sessions.\n- Hub proxies per-session RPCs by routing based on spoke:session prefix:\n  - Info, SendText, SendKey, SendBytes, Resize, WaitFor, WaitForIdle, Subscribe, etc.\n  - For hub-local sessions (no prefix), handle directly.\n- Prefer streaming updates (SubscribeSessions) per spoke; fall back to periodic polling if unavailable.\n- Spokes reachable via Unix socket must be on same host/namespace; TCP otherwise.\n- Observability: log spoke reachability, last-seen, and proxy errors with spoke name.\n\nImplementation notes\n- Extend config model to include federation spokes with name+address.\n- Add hub-side dialing that supports unix sockets (path) and TCP with existing auth settings.\n- Update web resolver/session aggregation to include spokes.\n- Consider debounce/circuit-breaker for unreachable spokes.\n\nTests\n- Unit test: hub aggregates two spokes and returns combined session list.\n- Integration-ish: hub Web sessions endpoint returns spokes.\n- Routing tests: spoke:session routes to correct backend.\n\nDocs\n- Update docs/spec.md and docs/federation-hub-spoke.md to reflect hub aggregation and config.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-26T17:56:44.558163129Z","created_by":"ubuntu","updated_at":"2026-01-26T21:01:00.989738992Z","closed_at":"2026-01-26T21:01:00.989645912Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"vtr-3qd3","title":"Multi-session idle","description":"vtr agent idle should accept multiple session names and unblock when ANY goes idle, returning which session(s) became idle. Useful for agents monitoring parallel work.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-28T18:41:40.863753495Z","created_by":"ubuntu","updated_at":"2026-01-30T03:52:47.382073611Z","closed_at":"2026-01-30T03:52:47.382018385Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"vtr-3ql","title":"Web UI: prevent screen flicker on session poll","description":"Context: Terminal view blanks to connecting after session list poll updates selected session.\nScope:\n- Avoid clearing screen when only session status metadata updates.\n- Keep terminal rendering stable while polling.\nAcceptance:\n- Terminal screen does not blank during periodic session refresh.\n- Status badges still update.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-21T01:23:30.593648309Z","created_by":"ubuntu","updated_at":"2026-01-21T01:24:07.320110664Z","closed_at":"2026-01-21T01:24:07.320039006Z","close_reason":"Completed","compaction_level":0,"original_size":0,"labels":["area:web"]}
{"id":"vtr-3qu","title":"Backpressure coalescing + keyframe policy","description":"Add latest-only coalescing and keyframe-on-resize behavior under backpressure.\n\nScope:\n- Per-subscriber latest-only ScreenUpdate buffering.\n- Periodic keyframes and keyframe on resize or desync.\n- Ring buffer of recent keyframes for resync.\n\nAcceptance:\n- Slow subscribers do not block server.\n- Resizes always result in a keyframe.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-20T20:34:55.212342136Z","created_by":"ubuntu","updated_at":"2026-01-20T22:11:39.745779935Z","closed_at":"2026-01-20T22:11:39.745728145Z","close_reason":"Completed","compaction_level":0,"original_size":0,"labels":["area:server","area:streaming","milestone:M6_5"],"dependencies":[{"issue_id":"vtr-3qu","depends_on_id":"vtr-1kt","type":"parent-child","created_at":"2026-01-26T17:41:07Z","created_by":"import"}]}
{"id":"vtr-3riu","title":"Patch 7: Raw output overflow should signal explicitly (no silent truncation)","status":"open","priority":2,"issue_type":"bug","created_at":"2026-02-11T01:05:44.096344024Z","created_by":"ubuntu","updated_at":"2026-02-11T01:05:44.096344024Z","compaction_level":0,"original_size":0}
{"id":"vtr-3rsz","title":"Patch 3: Web desync recovery should trigger stream restart","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-02-11T01:05:43.481981147Z","created_by":"ubuntu","updated_at":"2026-02-11T01:09:57.957789710Z","closed_at":"2026-02-11T01:09:57.957731496Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"vtr-3se","title":"Package JetBrains Mono Nerd Font","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-22T19:04:19.532771999Z","created_by":"ubuntu","updated_at":"2026-01-23T18:39:37.869316821Z","closed_at":"2026-01-23T18:39:37.869260211Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"vtr-3sw","title":"Federation: hub Subscribe streaming proxy","description":"Extend federation to proxy Subscribe streaming events through the hub. Hub accepts Subscribe for spoke:session, opens stream to target spoke, forwards ScreenUpdate/raw_output/session_exited events, and propagates errors. Keep backpressure and resync semantics consistent with docs/streaming.md. Depends on core federation proxy bead.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-22T05:35:01.017471628Z","created_by":"ubuntu","updated_at":"2026-01-26T19:54:43.868871303Z","closed_at":"2026-01-26T19:54:43.868808812Z","close_reason":"Implemented in code (tunnel Subscribe proxy + federated streaming)","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"vtr-3sw","depends_on_id":"vtr-2nf","type":"blocks","created_at":"2026-01-26T17:41:07Z","created_by":"import"}]}
{"id":"vtr-3tg","title":"Web UI: Remove left sidebar after tab bar rollout","description":"Context: After adopting the Chrome-style tab bar and related controls, the left sidebar becomes redundant.\nScope:\n- Remove the left sidebar entirely.\n- Ensure all session navigation and actions are accessible via the tab bar and its menus.\n- Reflow the layout so the terminal view uses the full width.\nAcceptance:\n- Left sidebar is removed from the web UI.\n- Tab bar provides access to session switching, creation, and context actions.\n- Layout uses the full width without regressions to terminal rendering.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-21T04:07:14.535237992Z","created_by":"ubuntu","updated_at":"2026-01-21T20:21:07.866275100Z","closed_at":"2026-01-21T20:21:07.866217078Z","close_reason":"Completed","compaction_level":0,"original_size":0,"labels":["area:web"],"dependencies":[{"issue_id":"vtr-3tg","depends_on_id":"vtr-2cr","type":"blocks","created_at":"2026-01-26T17:41:07Z","created_by":"import"},{"issue_id":"vtr-3tg","depends_on_id":"vtr-xob","type":"parent-child","created_at":"2026-01-26T17:41:07Z","created_by":"import"}]}
{"id":"vtr-3tv","title":"Evaluate removing app-managed TLS certs when using Tailscale Serve (gRPC implications)","description":"Investigate whether vtr can drop its own TLS cert handling when deployed behind Tailscale Serve. Verify Serve support for raw TCP and gRPC/h2, including how TLS termination works and whether client/server certs are still needed for gRPC. Document recommended configuration and any constraints; decide if TLS is optional or can be removed entirely in this mode.","notes":"Findings:\n- Serve HTTPS reverse proxy is HTTP-only to 127.0.0.1 and does not document gRPC/h2 support; avoid it for gRPC.\n- Serve TCP forwarders (raw or TLS-terminated) are L4 and protocol-agnostic, suitable for unified gRPC+web listener.\n\nSingle-port recommendation:\n- Run hub unified addr on loopback (e.g. 127.0.0.1:4620) and expose exactly one external port via Serve TLS-terminated TCP, e.g. tailscale serve --tls-terminated-tcp 443 tcp://127.0.0.1:4620.\n- This keeps one port and should allow https://<service>.<tailnet>.ts.net for the Web UI (requires HTTPS enabled for the tailnet and Serve configured on hub).\n\nCert impact:\n- With TLS-terminated TCP, app-managed server certs can be dropped on the hub; set auth.mode=token (mTLS wonâ€™t work when Serve terminates TLS).\n- Clients still need a CA bundle because buildClientTLS requires auth.ca_file; point it to the system CA bundle to trust Letâ€™s Encrypt.\n\nFallback:\n- If TLS-terminated TCP doesnâ€™t negotiate ALPN h2 for gRPC, use raw TCP forwarder and keep vtr-managed TLS on the hub (still single port).\n\nValidation:\n- Confirm ALPN h2 on Serve TLS-terminated TCP with grpcurl or openssl s_client -alpn h2.","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-23T00:28:34.956483288Z","created_by":"ubuntu","updated_at":"2026-01-27T22:03:29.266151195Z","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"vtr-3tv","depends_on_id":"vtr-2id","type":"parent-child","created_at":"2026-01-26T17:41:07Z","created_by":"import"}]}
{"id":"vtr-3u6","title":"Web UI validation + docs + screenshots","description":"Testing + docs + screenshots for web UI.\n\nScope:\n- Add E2E coverage or documented manual test plan.\n- Capture mobile + desktop screenshots for review.\n- Document build/run steps and known limitations.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-20T20:34:55.837192213Z","created_by":"ubuntu","updated_at":"2026-01-20T21:38:21.401142575Z","closed_at":"2026-01-20T21:38:21.401087108Z","close_reason":"Completed","compaction_level":0,"original_size":0,"labels":["area:docs","area:testing","milestone:M7_1"],"dependencies":[{"issue_id":"vtr-3u6","depends_on_id":"vtr-6ia","type":"parent-child","created_at":"2026-01-26T17:41:07Z","created_by":"import"}]}
{"id":"vtr-3v1","title":"Implement Biome","description":"Context: Web UI lacks Biome linting; need consistent lint/format and a clean baseline.\nScope:\n- Add Biome configuration and wiring for the web app (config file, scripts/CI hook as needed).\n- Run Biome across the web codebase.\n- Fix all Biome findings iteratively until lint passes cleanly.\n- Ensure build/tests remain green after fixes.\nAcceptance:\n- Biome is installed and configured for the web app.\n- `biome check` (or project lint script) passes with no errors.\n- Web build completes successfully after fixes.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-20T22:46:54.238699369Z","created_by":"ubuntu","updated_at":"2026-01-20T23:13:23.527130957Z","closed_at":"2026-01-20T23:13:23.527075819Z","close_reason":"Completed","compaction_level":0,"original_size":0,"labels":["area:web"],"dependencies":[{"issue_id":"vtr-3v1","depends_on_id":"vtr-xob","type":"parent-child","created_at":"2026-01-26T17:41:07Z","created_by":"import"}]}
{"id":"vtr-3vb","title":"Web UI: Experimental Canvas terminal renderer","description":"Context: The current web terminal renderer is DOM-based; we want an experimental HTML5 Canvas renderer to explore performance/quality tradeoffs.\nScope:\n- Implement a canvas-based terminal renderer in parallel with the existing renderer.\n- Provide an easy mechanism to switch renderers (e.g., toggle or URL flag).\n- Keep feature parity for core rendering (cells, colors, cursor) where feasible.\n- Label as experimental/low priority.\nAcceptance:\n- Canvas renderer can render the terminal grid with correct fg/bg colors.\n- Users can switch between DOM and Canvas renderers without a reload (or with a documented toggle).\n- Existing renderer remains the default and unaffected.","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-21T04:08:22.652796394Z","created_by":"ubuntu","updated_at":"2026-01-21T18:17:27.127389304Z","closed_at":"2026-01-21T18:17:27.127327766Z","close_reason":"Completed","compaction_level":0,"original_size":0,"labels":["area:web"],"dependencies":[{"issue_id":"vtr-3vb","depends_on_id":"vtr-xob","type":"parent-child","created_at":"2026-01-26T17:41:07Z","created_by":"import"}]}
{"id":"vtr-3vf","title":"Web UI: thin WS shim over SessionsSnapshot stream","description":"Update web layer to be a thin bridge over the new snapshot stream (no custom aggregation).\\n\\nChanges\\n- cmd/vtr/web_cmd.go: replace sessionListState + watchCoordinatorSessions with a direct gRPC stream to the hubâ€™s SubscribeSessionsSnapshot (or renamed SubscribeSessions). Forward SessionsSnapshot frames to WS clients as Any.\\n- /api/ws/sessions handshake remains SubscribeSessionsRequest (unless renamed in proto); WS should only validate hello and then proxy.\\n- Remove coordinator polling logic from web server. Coordinator updates should arrive via gRPC snapshots.\\n- web/src/lib/ws.ts: ensure it expects SessionsSnapshot messages (typeName vtr.SessionsSnapshot). Remove any references to SubscribeSessionsEvent.\\n- web/src/lib/proto.ts + dist assets: regenerate from updated proto definitions.\\n- docs/web-ui.md + docs/streaming.md: update to document snapshot stream over WS.\\n\\nAcceptance\\n- With zero sessions, WS stream still delivers coordinators (including newly joined spokes).\\n- WS endpoint behavior mirrors gRPC snapshot stream; no extra semantics.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-27T00:14:11.331182399Z","created_by":"ubuntu","updated_at":"2026-01-27T01:05:17.155614810Z","closed_at":"2026-01-27T01:05:17.155533533Z","close_reason":"Completed","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"vtr-3vf","depends_on_id":"vtr-2kp","type":"parent-child","created_at":"2026-01-27T00:14:11.333850746Z","created_by":"ubuntu"}]}
{"id":"vtr-3vl","title":"Web UI: Multi-view dashboard with coordinator-grouped thumbnails","description":"Context: After font auto-scaling, we need a multi-view dashboard that shows many sessions at once, grouped by coordinator, as the foundation for a central command panel.\nScope:\n- Add a multi-view mode that renders thumbnail previews for each session, grouped under its coordinator.\n- Keep thumbnails in sync with live terminal updates (lower fidelity is OK).\n- Allow selecting a session from a thumbnail to focus/attach in the main view.\n- Preserve existing single-session view as a primary/secondary mode.\nAcceptance:\n- Multi-view dashboard shows coordinators with their sessions as thumbnails.\n- Thumbnails update as the sessions change and are readable at a glance.\n- Selecting a thumbnail focuses or attaches to that session.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-21T01:30:58.983587534Z","created_by":"ubuntu","updated_at":"2026-01-21T01:54:15.426929763Z","closed_at":"2026-01-21T01:54:15.426870188Z","close_reason":"Completed","compaction_level":0,"original_size":0,"labels":["area:web"],"dependencies":[{"issue_id":"vtr-3vl","depends_on_id":"vtr-1y9","type":"blocks","created_at":"2026-01-26T17:41:07Z","created_by":"import"},{"issue_id":"vtr-3vl","depends_on_id":"vtr-xob","type":"parent-child","created_at":"2026-01-26T17:41:07Z","created_by":"import"}]}
{"id":"vtr-436","title":"Fix web UI reload loop on stale session hash","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-28T17:17:52.710551331Z","created_by":"ubuntu","updated_at":"2026-01-28T17:24:53.443101422Z","closed_at":"2026-01-28T17:24:53.443008492Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"vtr-4vi","title":"M8 - Attach TUI Mouse Support","description":"Goal: Add mouse passthrough in vtr attach for interactive apps (vim, htop, etc.).\n\nContext:\n- See Mouse Support (M8) in docs/spec.md and docs/progress.md.\n- Requires mouse mode tracking and SendMouse RPC.\n\nSuccess criteria:\n- Mouse input forwarded only when mouse tracking is enabled\n- Modes and modifiers encoded correctly\n- Tests cover mode gating and encoding","status":"blocked","priority":2,"issue_type":"epic","created_at":"2026-01-20T20:34:55.074031134Z","created_by":"ubuntu","updated_at":"2026-01-20T22:14:27.183104397Z","compaction_level":0,"original_size":0,"labels":["area:tui","milestone:M8"],"dependencies":[{"issue_id":"vtr-4vi","depends_on_id":"vtr-1kt","type":"blocks","created_at":"2026-01-26T17:41:07Z","created_by":"import"}]}
{"id":"vtr-6ia","title":"M7.1 - Web UI Streaming Updates","description":"Goal: Bring in-repo Web UI up to date with streaming specs and ship a maintainable frontend.\n\nContext:\n- Align with docs/spec.md Web UI + streaming semantics.\n- web/ should contain source + build tooling; vtr web serves web/dist.\n\nSuccess criteria:\n- vtr web serves functional UI from web/dist with no manual steps\n- UI renders live sessions reliably across reconnects/resizes\n- Renderer handles attributes, cursor, and wide-char heuristics\n- UI matches Tokyo Night spec and has a test or manual validation plan","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-20T20:34:55.046619313Z","created_by":"ubuntu","updated_at":"2026-01-20T22:14:00.705997385Z","closed_at":"2026-01-20T22:14:00.705926107Z","close_reason":"Completed","compaction_level":0,"original_size":0,"labels":["area:web","milestone:M7_1"],"dependencies":[{"issue_id":"vtr-6ia","depends_on_id":"vtr-xob","type":"blocks","created_at":"2026-01-26T17:41:07Z","created_by":"import"}]}
{"id":"vtr-716","title":"Use UUID-backed session IDs with mutable labels","description":"Problem\n- Session names are currently used as identifiers, which makes renames risky and forces name stability.\n\nProposal\n- Assign a random UUID at session creation and treat the human-readable name as a mutable label.\n- All RPCs, events, and internal routing should reference the UUID (or a composite id that includes coordinator + uuid).\n- The label can change freely without affecting routing or identity.\n\nScope\n- Add UUID field to session model and ensure it is generated at creation.\n- Update gRPC/proto messages and server/client routing to use UUIDs instead of names for identity.\n- Keep label in session metadata and use it only for display.\n- Migration strategy for existing sessions (map current name to label + generated UUID).\n\nAcceptance\n- Renaming a session does not affect routing or references.\n- All API calls that target a session use UUID (not name).\n- UI displays label but uses UUID for actions.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-26T17:45:35.974380133Z","created_by":"ubuntu","updated_at":"2026-01-26T21:01:34.306017541Z","closed_at":"2026-01-26T21:01:34.305959720Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"vtr-74a","title":"Web UI: Increase single-view terminal height","description":"Context: In single-view mode, the terminal viewport height is too small, reducing usability.\nScope:\n- Increase the vertical size of the single-view terminal window.\n- Ensure the layout still works on desktop and mobile viewports.\n- Avoid breaking tab bar or other UI components.\nAcceptance:\n- Single-view terminal area is noticeably taller and more usable.\n- Layout remains responsive across common screen sizes.\n- No regressions to terminal rendering or input focus.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-21T20:28:37.231712275Z","created_by":"ubuntu","updated_at":"2026-01-21T20:32:26.811066409Z","closed_at":"2026-01-21T20:32:26.811009089Z","close_reason":"Completed","compaction_level":0,"original_size":0,"labels":["area:web"],"dependencies":[{"issue_id":"vtr-74a","depends_on_id":"vtr-xob","type":"parent-child","created_at":"2026-01-26T17:41:07Z","created_by":"import"}]}
{"id":"vtr-8fi","title":"Web UI: Position '+' button adjacent to tabs","description":"Context: The new tab button placement should match Chrome, directly adjacent to the last tab.\nScope:\n- Move the `+` new session button to immediately follow the last tab (not pinned to the far right).\n- Keep spacing and alignment consistent with Chrome-style tabs.\nAcceptance:\n- `+` button appears directly to the right of the last tab.\n- Button remains accessible and does not overlap tabs when overflow occurs.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-21T21:58:52.605800795Z","created_by":"ubuntu","updated_at":"2026-01-21T22:05:44.105826296Z","closed_at":"2026-01-21T22:05:44.105756972Z","close_reason":"Completed","compaction_level":0,"original_size":0,"labels":["area:web"],"dependencies":[{"issue_id":"vtr-8fi","depends_on_id":"vtr-xob","type":"parent-child","created_at":"2026-01-26T17:41:07Z","created_by":"import"}]}
{"id":"vtr-8re","title":"Tailscale Serve docs","description":"Document Tailscale Serve setup and tailnet-only access.\n\nScope:\n- Update docs with vtr web --listen and tailscale serve https flow.\n- Confirm no Funnel support in M7.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-20T20:34:55.453868770Z","created_by":"ubuntu","updated_at":"2026-01-20T22:13:20.976370489Z","closed_at":"2026-01-20T22:13:20.976295504Z","close_reason":"Completed","compaction_level":0,"original_size":0,"labels":["area:docs","milestone:M7"],"dependencies":[{"issue_id":"vtr-8re","depends_on_id":"vtr-xob","type":"parent-child","created_at":"2026-01-26T17:41:07Z","created_by":"import"}]}
{"id":"vtr-9ea","title":"TUI: Enable leader commands in exited-session view","description":"Context: In exited sessions, the TUI bottom bar only shows Quit (duplicated as Q + Enter) and leader commands are unavailable, making it harder to switch sessions.\nScope:\n- Allow the leader key to be used even when viewing an exited session (e.g., next/prev session, list, detach).\n- Update the bottom bar to avoid duplicate quit hints (use a single Q).\n- Show the leader hint alongside quit in exited-session view.\nAcceptance:\n- Exited-session view accepts leader key combos for session navigation/actions.\n- Bottom bar shows a single quit hint and the leader hint; no duplicate Quit/Enter.\n- Normal (non-exited) session behavior remains unchanged.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-20T22:59:33.715025126Z","created_by":"ubuntu","updated_at":"2026-01-20T23:17:26.579038134Z","closed_at":"2026-01-20T23:17:26.578983648Z","close_reason":"Completed","compaction_level":0,"original_size":0,"labels":["area:tui"]}
{"id":"vtr-9f3","title":"Input UX (focus, paste, action tray)","description":"Implement input UX for mobile and desktop.\n\nScope:\n- Tap-to-focus, paste handling, and bottom input bar.\n- Action tray (Ctrl/Esc/Tab/arrows/PgUp/PgDn).\n- Disable input when session exits or socket is down.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-20T20:34:55.795915160Z","created_by":"ubuntu","updated_at":"2026-01-20T21:21:21.871564081Z","closed_at":"2026-01-20T21:21:21.871480109Z","close_reason":"Completed","compaction_level":0,"original_size":0,"labels":["area:web","milestone:M7_1"],"dependencies":[{"issue_id":"vtr-9f3","depends_on_id":"vtr-6ia","type":"parent-child","created_at":"2026-01-26T17:41:07Z","created_by":"import"}]}
{"id":"vtr-a05","title":"ASan/LSan shim build pipeline","description":"Add sanitizer build pipeline for the Zig shim (LLVM IR + clang ASan/LSan).\n\nScope:\n- Build zig-out LLVM IR and compile with clang -fsanitize=address.\n- Archive into go-ghostty/shim/zig-out-asan.\n- Wire suppression files if needed.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-20T20:34:56.106277703Z","created_by":"ubuntu","updated_at":"2026-01-20T22:12:42.100040383Z","closed_at":"2026-01-20T22:12:42.099982522Z","close_reason":"Completed","compaction_level":0,"original_size":0,"labels":["area:build","area:ghostty","milestone:M9"],"dependencies":[{"issue_id":"vtr-a05","depends_on_id":"vtr-uoj","type":"parent-child","created_at":"2026-01-26T17:41:07Z","created_by":"import"}],"comments":[{"id":1,"issue_id":"vtr-a05","author":"ubuntu","text":"Reopened: revived; waiting on ASan pipeline decision","created_at":"2026-01-20T21:30:28Z"}]}
{"id":"vtr-a3u","title":"Terminal renderer (keyframes + deltas)","description":"Render terminal grid from ScreenUpdate keyframes and deltas.\n\nScope:\n- Apply frame_id/base_frame_id and drop mismatched deltas.\n- Render fg/bg/attributes, cursor, and inverse/faint handling.\n- Wide-char heuristics via wcwidth and run-based rendering.\n- Selection/copy behavior and ligature handling.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-20T20:34:55.752038803Z","created_by":"ubuntu","updated_at":"2026-01-20T20:47:52.082516691Z","closed_at":"2026-01-20T20:47:52.082459119Z","close_reason":"Implemented terminal renderer (keyframes+deltas, attrs, cursor, wide-char, selection/copy).","compaction_level":0,"original_size":0,"labels":["area:streaming","area:web","milestone:M7_1"],"dependencies":[{"issue_id":"vtr-a3u","depends_on_id":"vtr-6ia","type":"parent-child","created_at":"2026-01-26T17:41:07Z","created_by":"import"}]}
{"id":"vtr-ain","title":"M4 - CLI Client Core","description":"Goal: Provide a usable CLI for core operations against a single coordinator.\n\nDeliverables:\n- vtr CLI commands: ls/spawn/info/screen/send/key/raw/resize/kill/rm\n- Client config loader for ~/.config/vtr/config.toml\n- Human + JSON output formats\n- CLI end-to-end test for spawn + screen\n\nSuccess criteria:\n- vtr ls/spawn/screen work against a running coordinator\n- CLI flags map cleanly to RPCs\n- Errors surface clearly and tests pass\n\nHistorical: completed 2026-01-18; migrated from docs/progress.md.","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-20T20:33:13.272143193Z","created_by":"ubuntu","updated_at":"2026-01-20T20:34:54.897977929Z","closed_at":"2026-01-20T20:34:54.897922893Z","close_reason":"historical","compaction_level":0,"original_size":0,"labels":["area:cli","milestone:M4"]}
{"id":"vtr-dll","title":"Federation + web server: remove prefixing, use SessionRef","description":"Goal: hub/federation and web API should route via SessionRef (id + coordinator), with no string prefixing.\n\nContext:\n- Hub currently prefixes session IDs/names for spokes and clients parse prefixes.\n- Web server also resolves by name and accepts id/name ambiguously.\n\nWork:\n- Update cmd/vtr/federation.go to route using SessionRef.coordinator/id instead of parseSessionRef / prefixName/prefixID.\n- Remove prefixing of IDs/names in federated list/snapshots/subscribe events; instead set coordinator field in responses where available.\n- Update cmd/vtr/web_cmd.go: websocket hello + actions must pass SessionRef (id+coordinator) and reject name-only inputs. Remove resolveSessionID fallback.\n- Ensure SubscribeSessions snapshots include coordinator info without altering names.\n\nAcceptance:\n- No prefixName/prefixID usage remains in federation.\n- Web server rejects requests without id.\n- Hub routes correctly using SessionRef.coordinator.\n\nNotes:\n- Depends on proto changes in vtr-ess.\n","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-27T22:02:12.387177470Z","created_by":"ubuntu","updated_at":"2026-01-27T22:49:41.840958223Z","closed_at":"2026-01-27T22:49:41.840903047Z","close_reason":"Completed","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"vtr-dll","depends_on_id":"vtr-ess","type":"waits-for","created_at":"2026-01-27T22:02:12.389305192Z","created_by":"ubuntu"}]}
{"id":"vtr-e0h","title":"WS client + reconnect/resubscribe","description":"Implement WS protobuf client using Any frames with reconnect/resubscribe handling.\n\nScope:\n- SubscribeRequest first frame; optional ResizeRequest.\n- Handle SubscribeEvent and google.rpc.Status errors.\n- Resubscribe on reconnect; resize-on-attach.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-20T20:34:55.711749318Z","created_by":"ubuntu","updated_at":"2026-01-20T20:47:57.887105313Z","closed_at":"2026-01-20T20:47:57.887048734Z","close_reason":"Implemented WS Any client with errors, reconnect/resubscribe, and resize handling.","compaction_level":0,"original_size":0,"labels":["area:streaming","area:web","milestone:M7_1"],"dependencies":[{"issue_id":"vtr-e0h","depends_on_id":"vtr-6ia","type":"parent-child","created_at":"2026-01-26T17:41:07Z","created_by":"import"}]}
{"id":"vtr-e4k","title":"Web UI smoke tests or manual plan","description":"Add a minimal E2E or manual test plan for web UI streaming and rendering.\n\nScope:\n- Validate ANSI -> screen -> web render pipeline.\n- Include reconnect/resync and attribute color checks.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-20T20:34:55.522442783Z","created_by":"ubuntu","updated_at":"2026-01-20T20:54:28.692590908Z","closed_at":"2026-01-20T20:54:28.692535109Z","close_reason":"Completed","compaction_level":0,"original_size":0,"labels":["area:testing","milestone:M7"],"dependencies":[{"issue_id":"vtr-e4k","depends_on_id":"vtr-xob","type":"parent-child","created_at":"2026-01-26T17:41:07Z","created_by":"import"}]}
{"id":"vtr-em5","title":"Session ordering: explicit order for TUI/Web UI (not alphabetical)","description":"Context: Sessions are currently sorted alphabetically. That might be acceptable for CLI, but in TUI/Web UI we need a stable, explicit session order that matches the tab bar ordering and supports renaming without reordering.\n\nScope:\n- Define an explicit session ordering model (e.g., order index) in coordinator state.\n- Persist and expose order over gRPC to clients.\n- Update Web UI and TUI to respect explicit order (tab bar + session list).\n- Ensure renaming a session does not change its order.\n\nAcceptance:\n- Sessions render in the defined order in TUI and Web UI (including tab bar).\n- Renaming a session does not reorder it.\n- Ordering remains stable across reconnects (within a coordinator runtime).","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-22T04:27:45.607612118Z","created_by":"ubuntu","updated_at":"2026-01-23T18:53:16.309522184Z","closed_at":"2026-01-23T18:53:16.309455815Z","close_reason":"Completed","compaction_level":0,"original_size":0,"labels":["area:server","area:tui","area:web"]}
{"id":"vtr-ess","title":"Proto + server: add SessionRef + enforce ID-only","description":"Goal: make gRPC contract ID-only with explicit coordinator field (breaking change).\n\nContext:\n- Today we still accept name-based routing and string-prefixed IDs/names for federation.\n- We want a clean contract: names are UI labels only; IDs are canonical; coordinator is explicit.\n\nWork:\n- Update proto (proto/vtr.proto): add SessionRef { string id = 1; string coordinator = 2; }.\n- Replace name/id pairs in request messages with SessionRef (or id+coordinator), e.g. SubscribeRequest, GetScreenRequest, SendKey/SendText/SendBytes, Resize, Kill, Close, Remove, Rename, WaitFor, WaitForIdle, DumpAsciinema, Info. (Breaking change is fine.)\n- Regenerate Go + TS (web/src/lib/proto.ts) so client/server compile.\n- Update server/grpc.go to enforce id-only (no resolve-by-name fallback). Remove/unused resolveSessionID/LookupIDByLabel paths.\n- Coordinator field should be accepted but ignored by non-federated server (used by hub/federation later).\n\nAcceptance:\n- Any RPC without SessionRef.id returns InvalidArgument.\n- No name-based routing remains in server/grpc.go.\n- Codegen updated and build passes.\n\nNotes:\n- Keep name as a label in responses only.\n","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-27T22:01:51.104930305Z","created_by":"ubuntu","updated_at":"2026-01-27T22:31:25.663017081Z","closed_at":"2026-01-27T22:31:25.662959119Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"vtr-gew","title":"Web UI cursor rendering misaligned in DOM/Canvas","description":"In the Web UI, cursor rendering appears broken. DOM renderer cursor appears ~300px below expected position and slightly to the left. Canvas renderer is generally correct but slightly too low.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-26T19:04:58.545866985Z","created_by":"ubuntu","updated_at":"2026-01-27T19:04:06.639188575Z","closed_at":"2026-01-27T19:04:06.639128749Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"vtr-hab","title":"VTR hub ignores Ctrl+C and hangs","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-26T19:37:59.771966011Z","created_by":"ubuntu","updated_at":"2026-01-26T19:39:25.339354921Z","closed_at":"2026-01-26T19:39:25.339256761Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"vtr-hlj","title":"CLI: implement vtr hub (coordinator + web UI)","description":"Implement new hub command in cmd/vtr/hub.go. Behavior per docs/spec.md: starts coordinator, serves gRPC on unix socket (default /var/run/vtrpc.sock) and optional TCP (default 127.0.0.1:4621), and serves web UI on 127.0.0.1:4620 (enabled by default; --no-web disables). Reuse existing web server logic from cmd/vtr/web_cmd.go; refactor helpers as needed but keep edits localized. Read config from vtrpc.toml (VTRPC_CONFIG_DIR) for defaults; CLI flags override. Integrate TLS+token for TCP using server ServeTCP from vtr-2ox. Do NOT edit cmd/vtr/root.go in this bead (root wiring handled later).","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-22T05:33:42.183743706Z","created_by":"ubuntu","updated_at":"2026-01-22T06:01:41.560001333Z","closed_at":"2026-01-22T06:01:41.559928162Z","close_reason":"Completed","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"vtr-hlj","depends_on_id":"vtr-2ox","type":"blocks","created_at":"2026-01-26T17:41:07Z","created_by":"import"},{"issue_id":"vtr-hlj","depends_on_id":"vtr-mvg","type":"blocks","created_at":"2026-01-26T17:41:07Z","created_by":"import"}]}
{"id":"vtr-ij68","title":"Tunnel call logging","description":"Add logging to CallUnary/CallStream in tunnel.go: log call start (spoke, method, callId), log timeout with elapsed time, log success with elapsed time, and warn on slow calls (>1s). Tunnel timeouts are currently silent with no visibility into latency.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-28T18:41:37.626424713Z","created_by":"ubuntu","updated_at":"2026-01-28T18:44:06.915531644Z","closed_at":"2026-01-28T18:44:06.915438112Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"vtr-ixh","title":"Web UI: Add 6+ popular color themes","description":"Context: Current theming is limited; we need a broader set of popular color schemes for the web UI.\nScope:\n- Add ~6 additional preset color themes (e.g., Monokai, Darcula, Solarized Dark/Light, Nord, Dracula).\n- Ensure themes cover both UI chrome and terminal colors.\n- Expose new themes in the theme selector and keep naming consistent.\nAcceptance:\n- At least 6 new preset themes are available and selectable.\n- Switching themes updates UI + terminal colors correctly.\n- Theme definitions remain centralized and maintainable.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-21T20:29:22.040613304Z","created_by":"ubuntu","updated_at":"2026-01-21T20:45:39.334580072Z","closed_at":"2026-01-21T20:45:39.334524794Z","close_reason":"Completed","compaction_level":0,"original_size":0,"labels":["area:web"],"dependencies":[{"issue_id":"vtr-ixh","depends_on_id":"vtr-xob","type":"parent-child","created_at":"2026-01-26T17:41:07Z","created_by":"import"}]}
{"id":"vtr-jhqu","title":"TUI rename modal starts with empty input","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-02-02T17:42:59.100321300Z","created_by":"ubuntu","updated_at":"2026-02-02T17:43:10.156397055Z","closed_at":"2026-02-02T17:43:10.156326859Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"vtr-jiu","title":"Web UI: Add spacing between multi-view checkbox and session name","description":"Context: In the multi-view session list, the selection checkbox is too close to the session name and visually intersects it.\n\nScope:\n- Add spacing between the checkbox and session name in multi-view cards/rows.\n- Keep alignment consistent with other list controls and responsive layouts.\n\nAcceptance:\n- Checkbox has clear breathing room from the session name.\n- No overlap at common viewport sizes.\n- Layout remains aligned with other multi-view controls.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-22T02:01:26.007968476Z","created_by":"ubuntu","updated_at":"2026-01-22T05:56:54.489501764Z","closed_at":"2026-01-22T05:56:54.489443432Z","close_reason":"Completed","compaction_level":0,"original_size":0,"labels":["area:web"]}
{"id":"vtr-jwkz","title":"Improve vtr agent help examples","description":"Update vtr agent --help and subcommand help with practical examples for common agent workflows: spawn session, send commands (with submit), wait/idle, fetch screen, etc. Focus on happy paths.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-28T18:21:11.618854849Z","created_by":"ubuntu","updated_at":"2026-02-02T18:56:33.059810786Z","closed_at":"2026-02-02T18:56:33.059697468Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"vtr-k2v","title":"Web UI: Multi-view thumbnail size presets + responsive grid","description":"Context: Multi-view thumbnails need size controls to balance density and readability across different screen widths.\nScope:\n- Add size presets for multi-view thumbnails (small/medium/large).\n- Adjust the grid layout based on viewport width to achieve edge-to-edge justification (determine columns per row accordingly).\n- Preserve readability and aspect ratio of terminal previews.\nAcceptance:\n- Users can switch between small/medium/large thumbnail sizes.\n- Grid reflows to fit the viewport width with clean justification and minimal gaps.\n- Thumbnails remain legible and maintain consistent aspect ratios.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-21T17:04:07.501957640Z","created_by":"ubuntu","updated_at":"2026-01-21T20:26:58.860470093Z","closed_at":"2026-01-21T20:26:58.860410428Z","close_reason":"Completed","compaction_level":0,"original_size":0,"labels":["area:web"],"dependencies":[{"issue_id":"vtr-k2v","depends_on_id":"vtr-3vl","type":"blocks","created_at":"2026-01-26T17:41:07Z","created_by":"import"},{"issue_id":"vtr-k2v","depends_on_id":"vtr-xob","type":"parent-child","created_at":"2026-01-26T17:41:07Z","created_by":"import"}]}
{"id":"vtr-k5x","title":"Theme system: configurable color presets and switching","description":"Context: Color configuration is ad hoc; we need a sustainable theming system with multiple preset themes (Tokyo Night plus others) and easy switching.\nScope:\n- Define a theme model/config (palette, UI/terminal colors) and store presets in a single, maintainable place.\n- Add a way to switch between pre-made themes at runtime (with a default theme).\n- Ensure both the UI chrome and terminal rendering use the selected theme consistently.\n- Persist the selected theme across reloads.\nAcceptance:\n- Multiple preset themes are available (including Tokyo Night).\n- Switching themes updates UI + terminal colors without a reload (or with a clear reload mechanism).\n- Theme selection is persisted and restored on load.\n- Theme definitions are centralized and easy to extend.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-20T23:05:47.407207054Z","created_by":"ubuntu","updated_at":"2026-01-20T23:25:46.645812408Z","closed_at":"2026-01-20T23:25:46.645716022Z","close_reason":"Completed","compaction_level":0,"original_size":0,"labels":["area:web"]}
{"id":"vtr-lol","title":"Streaming proto updates + stub regen","description":"Update proto streaming schema to include frame_id/base_frame_id/is_keyframe plus ScreenDelta/RowDelta.\n\nScope:\n- Update proto/vtr.proto to match docs/streaming.md and docs/spec.md.\n- Regenerate Go stubs (mise run proto) and update any compile errors.\n- Keep M7 behavior keyframe-only, but ensure delta fields exist for forward compatibility.\n\nAcceptance:\n- Go build passes with updated proto.\n- Streaming messages include new fields in server-side structs.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-20T20:34:55.150826322Z","created_by":"ubuntu","updated_at":"2026-01-20T22:11:39.741064804Z","closed_at":"2026-01-20T22:11:39.740959039Z","close_reason":"Completed","compaction_level":0,"original_size":0,"labels":["area:proto","area:streaming","milestone:M6_5"],"dependencies":[{"issue_id":"vtr-lol","depends_on_id":"vtr-1kt","type":"parent-child","created_at":"2026-01-26T17:41:07Z","created_by":"import"}]}
{"id":"vtr-m1f","title":"TUI tab bar: per-coordinator labels, sessions, and +","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-27T20:15:56.662223731Z","created_by":"ubuntu","updated_at":"2026-01-27T20:21:44.146637393Z","closed_at":"2026-01-27T20:21:44.146560384Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"vtr-mvg","title":"Config: add vtrpc.toml schema + VTRPC_CONFIG_DIR loader","description":"Implement new config loader at cmd/vtr/config.go for vtrpc.toml. Use  (default ~/.config/vtrpc) and read vtrpc.toml. New schema per docs/spec.md: [hub] grpc_addr=127.0.0.1:4621, grpc_socket=/var/run/vtrpc.sock, web_addr=127.0.0.1:4620, web_enabled=true; [auth] mode=token|mtls|both, token_file, ca_file, cert_file, key_file; [server] cert_file, key_file. Provide helpers to expand ~, resolve default paths, and return empty config if missing. Do NOT edit cmd/vtr/root.go in this bead. Update any config helpers used by clients to read new path (e.g., defaultConfigPath) and avoid old ~/.config/vtr/config.toml assumptions. Add/adjust tests in cmd/vtr/client_test.go only if needed to keep compile; otherwise leave for later test-update bead.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-22T05:33:26.171071702Z","created_by":"ubuntu","updated_at":"2026-01-22T05:49:27.076654510Z","closed_at":"2026-01-22T05:49:27.076599002Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"vtr-ne1","title":"vtr web command + WS bridge","description":"Implement vtr web command and protobuf WS bridge.\n\nScope:\n- Serve static assets and bridge Subscribe over WebSocket using Any frames.\n- Support Resize/SendText/SendKey/SendBytes frames.\n- Forward SubscribeEvent frames and close on google.rpc.Status error.\n\nStatus: already implemented per docs/progress.md.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-20T20:34:55.310322813Z","created_by":"ubuntu","updated_at":"2026-01-20T20:34:55.558214558Z","closed_at":"2026-01-20T20:34:55.558135125Z","close_reason":"done","compaction_level":0,"original_size":0,"labels":["area:server","area:web","milestone:M7"],"dependencies":[{"issue_id":"vtr-ne1","depends_on_id":"vtr-xob","type":"parent-child","created_at":"2026-01-26T17:41:07Z","created_by":"import"}]}
{"id":"vtr-pua","title":"M5 - MVP: Advanced Operations + Multi-Coordinator","description":"Goal: Ship the agent-ready MVP with grep/wait/idle and coordinator discovery.\n\nDeliverables:\n- Server RPCs: Grep/WaitFor/WaitForIdle\n- CLI commands: grep/wait/idle\n- Multi-coordinator resolution + config resolve\n- Tests for grep context + wait timeouts + idle detection\n- Updated docs for MVP usage/limits\n\nSuccess criteria:\n- Agents can spawn/send/block on output/idle\n- Grep returns correct line numbers + context\n- Multi-coordinator ambiguity errors are deterministic\n- go test ./... passes\n\nHistorical: completed 2026-01-18; migrated from docs/progress.md.","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-20T20:33:13.296550428Z","created_by":"ubuntu","updated_at":"2026-01-20T20:34:54.920085219Z","closed_at":"2026-01-20T20:34:54.920028890Z","close_reason":"historical","compaction_level":0,"original_size":0,"labels":["area:cli","milestone:M5"]}
{"id":"vtr-qqx","title":"Headless mode: coordinator must answer CPR/DSR","description":"Problem: In headless mode with no terminal emulator attached, TUIs (e.g., Codex) send DSR/CPR queries like CSI 6n and block or error when no response arrives. A PTY is just a byte stream and does not synthesize replies, so without a client acting as a terminal emulator, the queries go unanswered. This breaks the intended architecture where clients are optional passive viewers and the coordinator is the primary VT engine.\n\nPlanned solution: Have the coordinator/VT engine treat DSR/CPR as a terminal-emulator responsibility. Detect CPR/DSR escape sequences in the output processing path and synthesize replies using the real cursor state from the VT engine (1-indexed row/col). Write the reply back into the PTY input stream for that session. This should happen regardless of attached clients so headless mode is fully functional. Initially support CSI 6n (cursor position report) and optionally DEC variant CSI ? 6 n; consider adding CSI 5n (status report) and DA/DA2 (CSI c / CSI ? c) if needed later.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-22T01:12:40.412499083Z","created_by":"ubuntu","updated_at":"2026-01-22T01:18:23.113131716Z","closed_at":"2026-01-22T01:18:23.113075536Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"vtr-r9k","title":"Mouse support test coverage","description":"Add tests for mouse mode gating and encoding correctness.\n\nScope:\n- Mode transitions from VT flags\n- SGR encoding for press/release/motion/wheel\n- Modifier bit handling","status":"blocked","priority":2,"issue_type":"task","created_at":"2026-01-20T20:34:56.060331496Z","created_by":"ubuntu","updated_at":"2026-01-20T22:15:00.444432616Z","compaction_level":0,"original_size":0,"labels":["area:testing","milestone:M8"],"dependencies":[{"issue_id":"vtr-r9k","depends_on_id":"vtr-1r7","type":"blocks","created_at":"2026-01-26T17:41:07Z","created_by":"import"},{"issue_id":"vtr-r9k","depends_on_id":"vtr-4vi","type":"parent-child","created_at":"2026-01-26T17:41:07Z","created_by":"import"}]}
{"id":"vtr-rnb","title":"Streaming semantics test coverage","description":"Add tests for streaming semantics.\n\nCoverage:\n- frame_id monotonicity\n- latest-only behavior under backpressure\n- resize triggers keyframe\n- final keyframe ordering before session_exited\n\nFiles: server/grpc_test.go, server/output tests, cmd/vtr attach tests if present.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-20T20:34:55.273323646Z","created_by":"ubuntu","updated_at":"2026-01-20T22:12:22.599777048Z","closed_at":"2026-01-20T22:12:22.599669310Z","close_reason":"Completed","compaction_level":0,"original_size":0,"labels":["area:streaming","area:testing","milestone:M6_5"],"dependencies":[{"issue_id":"vtr-rnb","depends_on_id":"vtr-1kt","type":"parent-child","created_at":"2026-01-26T17:41:07Z","created_by":"import"}]}
{"id":"vtr-s8c","title":"Web UI: Auto-refresh session list for new coordinator sessions","description":"Context: Newly created sessions within a coordinator do not appear in the web UI left panel without a manual refresh.\nScope:\n- Ensure the left-panel session tree updates when new sessions are created under an existing coordinator.\n- Preserve existing selection/attach behavior when the list refreshes.\n- Handle coordinator updates via the existing data source (poll/stream/subscribe) without full page reloads.\nAcceptance:\n- Creating a new session causes it to appear in the left panel automatically.\n- Coordinator grouping remains intact.\n- Selection state does not reset unnecessarily when the list updates.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-20T23:00:36.890500125Z","created_by":"ubuntu","updated_at":"2026-01-20T23:05:04.257430733Z","closed_at":"2026-01-20T23:05:04.257348373Z","close_reason":"Completed","compaction_level":0,"original_size":0,"labels":["area:web"],"dependencies":[{"issue_id":"vtr-s8c","depends_on_id":"vtr-xob","type":"parent-child","created_at":"2026-01-26T17:41:07Z","created_by":"import"}]}
{"id":"vtr-tac","title":"CLI: implement vtr setup (local hub config + certs)","description":"Add cmd/vtr/setup.go implementing . Flow: if config file exists, prompt to overwrite [y/N]. Generate vtrpc.toml for local hub (ports 4620/4621, web enabled), generate TLS certs + token with 0600 perms. Default socket /var/run/vtrpc.sock; if not writable, prompt to use /tmp/vtrpc.sock [Y/n] and update config accordingly. Use  (default ~/.config/vtrpc). Create dirs with 0700. Do NOT edit cmd/vtr/root.go in this bead (root wiring handled later).","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-22T05:34:02.065885030Z","created_by":"ubuntu","updated_at":"2026-01-22T06:04:17.595538922Z","closed_at":"2026-01-22T06:04:17.595452896Z","close_reason":"Completed","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"vtr-tac","depends_on_id":"vtr-mvg","type":"blocks","created_at":"2026-01-26T17:41:07Z","created_by":"import"}]}
{"id":"vtr-tgz","title":"Web UI: Add right-hand margin for terminal viewport","description":"Context: The web terminal view currently lacks a right-side margin, making the terminal feel flush against the edge compared to the left.\nScope:\n- Add a right-hand margin/padding for the terminal viewport to match the left margin.\n- Keep the terminal grid centered/aligned within the available space.\n- Ensure responsive behavior on desktop and mobile.\nAcceptance:\n- Terminal view has a visible right-side margin comparable to the left.\n- Layout remains balanced across common viewport sizes.\n- No regressions to terminal sizing or input focus.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-21T04:14:47.440535261Z","created_by":"ubuntu","updated_at":"2026-01-21T17:17:29.219802846Z","closed_at":"2026-01-21T17:17:29.219744943Z","close_reason":"Completed","compaction_level":0,"original_size":0,"labels":["area:web"],"dependencies":[{"issue_id":"vtr-tgz","depends_on_id":"vtr-xob","type":"parent-child","created_at":"2026-01-26T17:41:07Z","created_by":"import"}]}
{"id":"vtr-tnj","title":"Coordinator federation (hub-and-spoke)","description":"Context: Web UI currently connects to a single coordinator over Unix domain sockets. We need a hub-and-spoke model where one \"hub\" coordinator serves the web UI and aggregates sessions from other coordinators via Tailscale, while keeping local socket connections as a supported option.\nScope:\n- Define a hub-and-spoke coordinator model (hub + spoke coordinators) and the connection protocol.\n- Add optional Tailscale transport for coordinator-to-coordinator connections, parallel to existing UDS transport.\n- Configure hub to connect to multiple spokes and surface their sessions in the web UI.\n- Keep local-only deployments working without Tailscale.\nSuccess criteria:\n- Hub coordinator can aggregate sessions from at least two spoke coordinators via Tailscale.\n- Web UI served by the hub shows sessions from all connected spokes.\n- Local UDS connections remain supported and can run without Tailscale.","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-21T01:33:33.848242896Z","created_by":"ubuntu","updated_at":"2026-01-26T21:00:57.748413126Z","closed_at":"2026-01-26T21:00:57.748357218Z","close_reason":"Completed","compaction_level":0,"original_size":0,"labels":["area:federation"]}
{"id":"vtr-tu0","title":"CLI agent wait helpers for harness/subagents (idle/unblocked signal)","description":"Add CLI agent wait helpers tied to each harness to emit an unblocked/done-processing signal for subagents (Codex, Pi, Claude, etc.). Define heuristics to detect which agent is running in a session and whether it has stopped working. Provide a reliable wait/notify interface for clients.","notes":"Preferred guidance: agents should use wait for idle for unblocked detection (until OSC 133-based heuristics exist).","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-23T00:33:34.693370029Z","created_by":"ubuntu","updated_at":"2026-01-26T17:49:34.890279390Z","closed_at":"2026-01-26T17:49:14.336056922Z","close_reason":"Closed per request; awaiting clarification on preferred wait/idle guidance","compaction_level":0,"original_size":0}
{"id":"vtr-uoj","title":"M9 - Memory Safety Test Suite","description":"Goal: Focused memory safety test suite for the go-ghostty CGO boundary.\n\nContext:\n- See Memory Safety section in docs/spec.md.\n- Uses Zig 0.15.2 + LLVM IR + clang ASan/LSan pipeline.\n\nSuccess criteria:\n- Sanitizer run reports zero actionable findings\n- go test -race passes for CGO-boundary packages\n- Docs describe ownership and free calls at the boundary","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-20T20:34:55.100815141Z","created_by":"ubuntu","updated_at":"2026-01-20T22:13:20.973633310Z","closed_at":"2026-01-20T22:13:20.973575940Z","close_reason":"Completed","compaction_level":0,"original_size":0,"labels":["area:testing","milestone:M9"],"dependencies":[{"issue_id":"vtr-uoj","depends_on_id":"vtr-299","type":"blocks","created_at":"2026-01-26T17:41:07Z","created_by":"import"}]}
{"id":"vtr-v5o","title":"Clients: CLI/TUI + Web UI use SessionRef","description":"Goal: all clients send SessionRef (id+coordinator). Labels remain UI-only.\n\nContext:\n- CLI/TUI currently accept labels and sometimes send name-based requests.\n- Web UI builds keys by string prefix and sometimes sends id/name fallbacks.\n\nWork:\n- cmd/vtr/client.go: resolve label->(id, coordinator) client-side; all RPCs send SessionRef only.\n- cmd/vtr/attach.go (TUI): keep labels for UI, but always store/use id + coordinator for RPCs/stream subscription.\n- web/src/*: store SessionRef (id + coordinator) in state; remove string prefix parsing and name fallbacks; hash uses id (optionally include coordinator separately if needed).\n\nAcceptance:\n- No gRPC request from CLI/TUI/Web UI includes name-only routing.\n- UI labels remain unchanged for display.\n- Active session selection uses canonical id.\n\nNotes:\n- Depends on proto changes in vtr-ess.\n","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-27T22:02:20.888310117Z","created_by":"ubuntu","updated_at":"2026-01-27T23:12:23.165717466Z","closed_at":"2026-01-27T23:12:23.165635708Z","close_reason":"Completed","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"vtr-v5o","depends_on_id":"vtr-ess","type":"waits-for","created_at":"2026-01-27T22:02:20.890975980Z","created_by":"ubuntu"}]}
{"id":"vtr-wuf","title":"Coordinator: log level flag + startup message","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-21T01:43:14.203008Z","created_by":"ubuntu","updated_at":"2026-01-21T01:44:14.507460138Z","closed_at":"2026-01-21T01:44:14.507402976Z","close_reason":"Completed","compaction_level":0,"original_size":0,"labels":["area:cli"]}
{"id":"vtr-wui","title":"UI screenshots (mobile + desktop)","description":"Capture UI screenshots for mobile (390px) and desktop (1280px).\n\nScope:\n- Expand coordinator tree and show attached session view.\n- Store artifacts per project convention.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-20T20:34:55.487659557Z","created_by":"ubuntu","updated_at":"2026-01-20T21:38:18.381204564Z","closed_at":"2026-01-20T21:38:18.381149597Z","close_reason":"Completed","compaction_level":0,"original_size":0,"labels":["area:web","milestone:M7"],"dependencies":[{"issue_id":"vtr-wui","depends_on_id":"vtr-xob","type":"parent-child","created_at":"2026-01-26T17:41:07Z","created_by":"import"}]}
{"id":"vtr-xias","title":"Cursor rendering position incorrect in DOM and Canvas renderers","description":"User reports cursor rendering position issues: DOM renderer cursor is too far left (overlaps previous character) in Bash, while Codex/Vim appear correct. Canvas renderer cursor is too far down in Bash and Vim. Task: systematically document how cursor rendering works across contexts (DOM/Canvas, apps). Add tests to reproduce and verify incorrect behavior, then implement fix and verify tests pass (must verify failing before fix and passing after).","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-30T00:04:21.967295213Z","created_by":"ubuntu","updated_at":"2026-02-02T19:06:23.198659675Z","closed_at":"2026-02-02T19:06:23.198604098Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"vtr-xob","title":"M7 - Web UI (Mobile-First)","description":"Goal: Deliver a touch-friendly browser UI with live terminal streaming over Tailscale.\n\nStatus: in progress (partial). Web command + protobuf WS bridge implemented.\n\nSuccess criteria:\n- Phone/desktop load UI, list sessions, attach, and send input\n- Terminal updates within ~250ms under normal load\n- Works via Tailscale Serve (tailnet-only)\n- Session exit/resize/disconnects handled cleanly","status":"closed","priority":2,"issue_type":"epic","created_at":"2026-01-20T20:34:55.019423991Z","created_by":"ubuntu","updated_at":"2026-01-20T22:14:00.703165603Z","closed_at":"2026-01-20T22:14:00.703058035Z","close_reason":"Completed","compaction_level":0,"original_size":0,"labels":["area:web","milestone:M7"],"dependencies":[{"issue_id":"vtr-xob","depends_on_id":"vtr-3jv","type":"blocks","created_at":"2026-01-26T17:41:07Z","created_by":"import"}]}
{"id":"vtr-y4h","title":"Coordinator: Detect idle sessions and broadcast over gRPC","description":"Context: There is no centralized idle detection, so UIs cannot distinguish active vs idle sessions at a glance.\nScope:\n- Track per-session activity centrally (screen updates and/or input events) and compute idle state with debounce/hysteresis.\n- Add idle status to coordinator state and broadcast changes over gRPC (e.g., new Subscribe event or field) with session identifiers.\n- Document idle threshold and update tests for state transitions and debounce behavior.\nAcceptance:\n- Idle state flips only after the configured inactivity threshold and does not thrash on brief pauses.\n- gRPC subscribers receive idle-state change events with session ID/name and current state.\n- Existing streaming behavior remains intact; tests cover idle transition + debounce.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-21T01:42:01.213742549Z","created_by":"ubuntu","updated_at":"2026-01-21T02:18:59.934729644Z","closed_at":"2026-01-21T02:18:59.934640812Z","close_reason":"Completed","compaction_level":0,"original_size":0,"labels":["area:server","area:streaming"]}
{"id":"vtr-y5c","title":"Multi-platform binary builds (macOS + Linux) in build task","description":"Add automatic build outputs for macOS and Linux (at least amd64/arm64 as feasible) as part of the standard build task/pipeline. Decide on build tooling (Go cross-compile, CI matrix, release artifacts), update docs, and ensure artifacts are versioned and easy to fetch.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-23T00:29:26.797316276Z","created_by":"ubuntu","updated_at":"2026-01-23T18:44:06.089227882Z","closed_at":"2026-01-23T18:44:06.089170772Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"vtr-yio","title":"Make Tunnel the canonical federation mechanism; remove RegisterSpoke and non-tunnel spokes","description":"Context\n- Federation currently uses a periodic RegisterSpoke heartbeat (unary RPC) to populate SpokeRegistry.\n- The Tunnel stream is separate and already long-lived; liveness is inferred indirectly and can be stale.\n- The heartbeat loop dials/closes gRPC connections every interval, logs \"registered\" repeatedly, and creates spurious noise.\n- SpokeRegistry is not updated by tunnel lifecycle; stale spokes can linger if the heartbeat stops or if the hub restarts.\n- We want a tunnel-first architecture; non-tunnel spokes should not exist.\n\nMotivation\n- Remove hacky heartbeat behavior and periodic logs.\n- Make liveness robust and explicit (stream open == connected, stream closed == disconnected).\n- Eliminate dual mechanisms (RegisterSpoke + Tunnel) and avoid tech debt while still pre-alpha.\n\nProposed Direction (breaking protocol change is OK)\n- Make Tunnel the canonical federation mechanism.\n- Remove RegisterSpoke RPC and the registerSpokeLoop from the spoke CLI.\n- Use the Tunnel handshake to register a spoke, update metadata, and drive liveness.\n\nDesign Details\n1) Proto changes\n   - Remove RegisterSpokeRequest/Response and RegisterSpoke RPC.\n   - Make TunnelHello carry all spoke identity/metadata (name, version, labels, capabilities, etc.).\n   - Optional: add a HelloAck (hub -> spoke) for hub_name/capabilities and to confirm registration.\n\n2) Hub registry + liveness\n   - On Tunnel Hello: upsert SpokeRegistry with name + metadata; mark connected.\n   - On Tunnel stream end: remove from registry.\n   - Optionally record last_seen on any incoming TunnelFrame (or drop last_seen entirely and just expose connected/disconnected).\n\n3) Transport-level liveness\n   - Add gRPC keepalive for tunnel connections (client keepalive pings, server enforcement).\n   - Avoid application-level heartbeats unless strictly necessary.\n\n4) Remove non-tunnel pathways\n   - Remove static federation spokes/dialer fallback for hub->spoke RPCs.\n   - Require tunnel for all federated calls (List/Info/Send/etc.).\n   - If a spoke is not tunnel-connected, it should not appear in hub lists.\n\n5) Logging + UX\n   - Log only connect/disconnect events for spokes.\n   - No periodic \"registered\" messages.\n\nChanges Required (non-exhaustive)\n- proto/vtr.proto: remove RegisterSpoke, adjust TunnelHello + frames.\n- cmd/vtr/spoke.go: remove registerSpokeLoop; only run tunnel loop when hub is configured.\n- cmd/vtr/federation.go: update Tunnel handler to upsert/remove registry; remove dialer fallback paths.\n- server/federation.go: add Remove/Touch methods; update semantics for liveness.\n- server/grpc.go + dialer paths: remove RegisterSpoke server method, update keepalive options.\n- docs/federation.md + related docs: rewrite for tunnel-only federation model.\n- tests: update federation/tunnel tests, add connect/disconnect registry tests.\n\nAcceptance Criteria\n- No RegisterSpoke RPC exists in proto or code.\n- Spoke registry is driven exclusively by tunnel lifecycle.\n- Hub never dials spokes directly; tunnel is required for federated operations.\n- No periodic \"spoke registered\" logs; only connect/disconnect logs.\n- Keepalive configured and tunnel liveness is reliable.\n\nNotes\n- This is a breaking change; update CLI/help/docs accordingly.\n- If we still want a concept of â€œstatic spokes,â€ they must connect via tunnel, not be dialed by hub.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-27T18:46:28.073364307Z","created_by":"ubuntu","updated_at":"2026-01-27T19:12:52.573506038Z","closed_at":"2026-01-27T19:12:52.573449208Z","close_reason":"Completed","compaction_level":0,"original_size":0}
{"id":"vtr-yve","title":"Web UI: Add '+' new session button in tab bar","description":"Context: The new session affordance should be minimal and integrated into the tab bar.\nScope:\n- Replace the current new-session UI with a `+` button inside the tab bar.\n- Keep behavior consistent with existing session creation (default naming, auto-attach if specified).\n- Ensure the button is accessible and works on desktop and mobile.\nAcceptance:\n- A `+` button appears in the tab bar and creates a new session when clicked.\n- No separate new-session control exists outside the tab bar.\n- Button behavior matches the existing new-session flow.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-21T20:26:46.923765474Z","created_by":"ubuntu","updated_at":"2026-01-21T20:30:48.008009981Z","closed_at":"2026-01-21T20:30:48.007953200Z","close_reason":"Completed","compaction_level":0,"original_size":0,"labels":["area:web"],"dependencies":[{"issue_id":"vtr-yve","depends_on_id":"vtr-xob","type":"parent-child","created_at":"2026-01-26T17:41:07Z","created_by":"import"}]}
{"id":"vtr-zb0q","title":"Unified streaming lifecycle: fresh-keyframe subscribe, delta-only updates, tunnel-drop WS close, hard-delete on WS close, and client connection indicators","description":"## Goal\nImplement end-to-end streaming/session lifecycle semantics for interactive clients so that attach behavior is deterministic, recoverable, and observable.\n\nThis bead intentionally combines protocol semantics, tunnel behavior, client UX state, and observability into one deliverable.\n\n## Product Decisions (locked)\n1. `Subscribe` stream starts with a **freshly generated keyframe**.\n2. After first keyframe, stream **deltas only** (no periodic keyframes in healthy steady-state).\n3. If hub detects tunnel per-call queue drop/desync risk for an active subscribe stream, **close that WS client immediately**.\n4. For WS-owned sessions, **hard delete session on WS close** (no pin, no TTL).\n5. Local and federated (hub/spoke) subscribe semantics must match.\n6. Add clear TUI/WebUI connection status indicators: connected+receiving vs disconnected.\n7. Add structured logs/counters for stream lifecycle and forced disconnect reasons.\n\n## Context / Why\nCurrent behavior is keyframe-only and already uses latest-only coalescing per subscriber. Tunnel per-call queue can drop oldest frames under pressure; drops are currently debug logs only. We need deterministic delta semantics and explicit failure handling to avoid silent client desync.\n\nRelevant current code paths:\n- `internal/transport/grpc/grpc.go` (`Subscribe`, sender loop, keyframe cache)\n- `internal/federation/federation.go` (`Subscribe` routing to tunnel)\n- `internal/federation/tunnel.go` (per-call queueing/drop behavior)\n- `internal/transport/web/handler.go` (WS bridge + close/error behavior)\n- `web/src/lib/ws.ts` + `web/src/lib/terminal.ts` (web stream state + delta apply)\n- `cmd/vtr/attach.go` (TUI apply/resubscribe behavior)\n\n## Scope\n### A) Streaming semantics (server)\n- Change `Subscribe` so first screen event is always a fresh keyframe (not reused cached keyframe).\n- Emit deltas thereafter when include_screen_updates=true:\n  - each delta has `frame_id` and `base_frame_id` set correctly\n  - `base_frame_id` must equal last emitted frame for that subscriber\n  - resize or any non-delta-safe condition emits keyframe\n- No periodic keyframe ticker in healthy stream path.\n- Keep final ordering guarantees: final raw/idle updates, then final screen update, then `session_exited`.\n\n### B) Delta generation rules\n- Maintain previous sent screen snapshot per subscriber in subscribe loop.\n- On each update tick, create current snapshot and compute row-level changes:\n  - if dimensions changed -> keyframe\n  - if no prior frame -> keyframe\n  - else emit `ScreenDelta` containing changed rows and cursor state\n- If delta computation fails or base is unknown, emit keyframe and continue.\n- Use existing global session frame IDs (`NextFrameID`) so all frames remain monotonic for that session.\n\n### C) Tunnel drop handling (federated)\n- Update tunnel per-call queue/drop handling so drops on streaming calls are **surfaced as fatal** to that call, not silently tolerated.\n- For subscribe stream calls: on detected call backlog drop, propagate stream error up to hub `Subscribe` route.\n- Hub WS bridge must then close only that client WS (and send status if possible before close).\n- Do not tear down unrelated calls or the entire tunnel connection.\n\n### D) WS lifecycle -> hard delete owned session\n- Implement WS-owned session lifecycle policy:\n  - session attached via WS is considered owned by that WS client for this flow\n  - when WS closes (normal or error), remove that session immediately\n- Ensure remove path is idempotent and handles already-exited sessions.\n- Log reason and session ID on deletion.\n\n### E) Client UX indicators (Web + TUI)\n- Web UI:\n  - show states: `connected+receiving`, `connected-not-receiving` (optional), `reconnecting/disconnected`\n  - derive receiving from recent inbound screen events timestamp\n- TUI attach:\n  - show equivalent stream health state in status bar/message line\n  - disconnected/reconnecting states should be visible and not silently fail\n\n### F) Observability\nAdd structured logs and counters/metrics for:\n- stream start/end\n- first keyframe sent\n- delta frames sent (count/size optional)\n- tunnel backlog drop detection\n- forced WS close due to drop/desync\n- WS close-triggered hard session delete\n- reconnect attempts (web client side logs optional)\n\nUse stable reason fields (examples):\n- `reason=tunnel_backlog_drop`\n- `reason=stream_desync`\n- `reason=ws_closed_remove_session`\n\n## Non-Goals\n- No client ACK protocol additions.\n- No periodic keyframe heartbeat (unless necessary for explicit bugfix).\n- No pin/TTL retention for WS-owned sessions.\n\n## Implementation Plan (suggested sequence)\n1. Server streaming core\n   - add per-subscriber previous-frame state and delta builder\n   - enforce first-frame fresh keyframe\n   - disable periodic keyframe ticker path\n2. Tunnel failure propagation\n   - make per-call drop fatal for stream call\n   - ensure `CallStream` returns deterministic error on drop\n3. Hub WS bridge handling\n   - on propagated stream error: close affected WS client\n   - invoke session removal policy for WS-owned session\n4. Web/TUI status indicators\n   - add UI state transitions + stale-receive detection\n5. Logging + metrics\n   - instrument all critical transitions and failure reasons\n6. Tests and docs updates\n\n## Required Tests\n### Unit / package tests\n- Delta generation correctness:\n  - unchanged screen => empty/no-op delta behavior\n  - changed rows => correct `row_deltas`\n  - cursor-only changes reflected correctly\n  - resize forces keyframe\n- Tunnel queue drop path:\n  - drop triggers fatal call error for stream\n\n### gRPC integration tests\n- First screen update on subscribe is keyframe with frame_id>0.\n- Subsequent updates are deltas with correct base chain.\n- No periodic keyframe in healthy stream over time window.\n- Desync/drop path leads to stream termination as specified.\n\n### Federation tests\n- Hub routed subscribe over tunnel preserves keyframe->delta semantics.\n- Forced queue pressure/drop closes only affected subscribe stream.\n\n### Web e2e / integration\n- WS attach receives first keyframe then deltas.\n- On induced tunnel drop, WS closes and UI shows disconnected/reconnecting.\n- WS close removes owned session immediately.\n\n### TUI behavior tests\n- Attach status indicator reflects connected+receiving and disconnected transitions.\n\n## Acceptance Criteria (must all pass)\n1. Subscribe semantics:\n   - first screen event per attach is fresh keyframe\n   - later events are deltas with valid base chain\n2. No periodic keyframes are emitted in healthy steady state.\n3. Tunnel backlog drop is not silent: affected stream fails and affected WS is closed.\n4. WS close causes immediate hard delete of owned session (no TTL/pin).\n5. Web and TUI visibly expose stream connection/receiving state.\n6. Logs clearly explain every forced close/deletion reason.\n7. Local and federated subscribe paths behave consistently.\n\n## Documentation Updates\n- `docs/streaming.md`: update canonical semantics to keyframe-on-subscribe + delta-only after, no periodic keyframes.\n- `docs/web-ui.md` and relevant TUI docs: connection status indicators and disconnect behavior.\n- `docs/federation.md`: document tunnel drop handling impact on client streams.\n\n## Rollout / Safety\n- Land with tests first for semantics where possible.\n- Keep failure mode explicit (close stream) rather than silent degradation.\n- Prefer deterministic reconnect over hidden state corruption.","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-02-10T21:17:48.672574971Z","created_by":"ubuntu","updated_at":"2026-02-10T23:38:14.868791858Z","closed_at":"2026-02-10T23:38:14.868700241Z","close_reason":"Completed","compaction_level":0,"original_size":0}
